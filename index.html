<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8" />
    <title>CL - Home</title>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://fonts.cdnfonts.com/css/product-sans" rel="stylesheet">
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link rel="stylesheet" href="https://cdn.plyr.io/3.7.8/plyr.css" />
    <link rel="stylesheet" href="/google-spinner.min.css">
    <style id="app.settingsStyles">
        :root {
            --cl-border-radius: 10px;
        }

        body {
            background:
                linear-gradient(217deg, rgba(255, 0, 0, 0.8), rgba(255, 0, 0, 0) 70.71%),
                linear-gradient(127deg, rgba(0, 255, 0, 0.8), rgba(0, 255, 0, 0) 70.71%),
                linear-gradient(336deg, rgba(0, 0, 255, 0.8), rgba(0, 0, 255, 0) 70.71%);
        }
    </style>
    <style>
        :root {
            --cl-info-color: rgba(0, 0, 255, 0.5);
            --cl-warn-color: rgba(255, 255, 0, 0.5);
            --cl-err-color: rgba(255, 0, 0, 0.5);

            --plyr-color-main: #df0000;
        }

        * {
            transition: all .125s ease-out;
            color: white;
            font-family: "Product Sans";
        }

        body {
            width: 100vw;
            height: 100vh;
            margin: 0;
            overflow: hidden;
        }

        fullscreen {
            width: 100vw;
            height: 100vh;
            position: absolute;
            top: 0;
            left: 0;
            overflow: hidden;
            opacity: 1;
            background: black;
        }

        fullscreen.hidden {
            opacity: 0;
            pointer-events: none;
        }

        fullscreen video {
            width: 100%;
            height: 100%;
            background: black;
        }

        .je-object__container {
            display: flex;
            flex-direction: column;
            gap: 10px;
            width: 100%;
        }

        .je-object__controls {
            display: none;
        }

        .form-control label {
            display: flex;
            flex-direction: column-reverse;
            gap: 5px;
            margin: 5px;
        }

        .material-symbols-outlined {
            font-variation-settings:
                'FILL' 1,
                'wght' 400,
                'GRAD' 0,
                'opsz' 24
        }

        .material-symbols-outlined.no-fill {
            font-variation-settings:
                'FILL' 0,
                'wght' 400,
                'GRAD' 0,
                'opsz' 24
        }

        .cl-panel {
            width: 100%;
            height: 100vh;
            position: absolute;
            top: 0;
            left: 0;
            opacity: 1;
        }

        .cl-panel.hidden,
        .cl-panel .boxed-content.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .cl-panel *:is(.content, .boxed-content) *:is(h1, h2, h3, h4, h5, h6, p, caption, blockquote) {
            margin: 0;
        }

        .cl-panel .content {
            width: calc(100% - 20px);
            position: absolute;
            top: 0;
            left: 0;
            overflow: auto;
            padding-top: 60px;
            padding-left: 10px;
            padding-right: 10px;
        }

        .cl-panel .boxed-content {
            width: calc(100% - 20px);
            height: calc(100vh - 90px);
            position: absolute;
            bottom: 10px;
            left: 10px;
            right: 10px;
            border-radius: var(--cl-border-radius);
            background-color: var(--cl-topbar-color);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: start;
            overflow-y: auto;
            gap: 10px;
        }

        .cl-panel .boxed-content:not(.is-centered) .cl-horizontal {
            width: auto;
        }

        .cl-panel .boxed-content.is-not-centered {
            align-items: start;
            justify-content: start;
            padding: 10px;
            width: calc(100% - 40px);
            height: calc(100vh - 110px);
        }

        .cl-panel .boxed-content.is-not-centered .cl-input {
            width: calc(100% - 20px);
        }

        .cl-panel .content.fullscreen {
            width: 100vw;
            height: 100vh;
            position: absolute;
            outline: 1px solid red;
        }

        .cl-panel .topbar {
            width: calc(100% - 20px);
            height: 60px;
            position: sticky;
            top: 10px;
            left: 10px;
            right: 10px;
            border-radius: var(--cl-border-radius);
            background-color: var(--cl-topbar-color);
            display: flex;
            justify-content: space-between;
        }

        .cl-panel .topbar .topbar-left,
        .cl-panel .topbar .topbar-center,
        .cl-panel .topbar .topbar-right {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 60px;
            height: 60px;
            color: white;
        }

        .cl-panel .topbar .topbar-left i,
        .cl-panel .topbar .topbar-center i,
        .cl-panel .topbar .topbar-right i {
            font-size: 30px;
            opacity: 1;
        }

        .cl-panel .topbar .topbar-left i::before {
            content: "arrow_back";
            opacity: 0;
            display: none;
        }

        .cl-panel .topbar .topbar-left::before {
            content: attr(title);
            position: absolute;
            bottom: -18px;
            padding: 5px;
            border-radius: var(--cl-border-radius);
            background: var(--cl-topbar-color);
            opacity: 0;
            pointer-events: none;
            transition: opacity .125s linear;
        }

        .cl-panel .topbar .topbar-left:hover::before {
            opacity: 1;
        }

        .cl-panel .topbar .topbar-left.goes-back:hover i {
            color: transparent;
        }

        .cl-panel .topbar .topbar-left.goes-back:hover i::before {
            content: "arrow_back";
            opacity: 1;
            display: inline-block;
            color: white;
        }

        .cl-panel .topbar .topbar-right {
            width: auto;
            padding-right: 10px;
            gap: 10px;
        }

        .cl-panel .topbar .topbar-center {
            width: auto;
        }

        .cl-panel .topbar .topbar-center .cl-button {
            width: 60px;
            height: 60px;
            border-radius: 0;
            justify-content: center;
            align-items: center;

        }

        .cl-panel .topbar .topbar-center .cl-button:not(:hover):not(:active) {
            background: transparent;
            border: none;
            outline: none;
            cursor: pointer;
            border-bottom: 0px solid;
        }

        .cl-panel .topbar .topbar-center .cl-button:hover {
            border-bottom: 5px solid var(--cl-topbar-color);
        }

        .cl-panel .topbar .topbar-center .cl-button::before {
            content: attr(title);
            position: absolute;
            bottom: -18px;
            padding: 5px;
            border-radius: var(--cl-border-radius);
            background: var(--cl-topbar-color);
            opacity: 0;
            pointer-events: none;
            transition: opacity .125s linear;
        }

        .cl-panel .topbar .topbar-center .cl-button:hover::before {
            opacity: 1;
        }

        .cl-panel .topbar .topbar-center .cl-button.selected {
            border-bottom: 5px solid white !important;
        }

        .cl-panel .topbar .topbar-center .cl-input {
            height: 100%;
            border-radius: 0;
            padding: 0;
        }

        .cl-panel .topbar .topbar-center .cl-input *:is(i, span) {
            padding: 18px;
        }

        .cl-panel .topbar .topbar-center .cl-input input {
            padding: 10px;
        }

        .cl-input {
            padding: 10px;
            display: flex;
            gap: 10px;
            color: white;
            border-radius: var(--cl-border-radius);
            background: var(--cl-topbar-color);
        }

        .cl-input input,
        .cl-input textarea,
        .cl-input select,
        input, textarea, select {
            border: none;
            background: none;
            font-size: large;
            color: white;
            padding: 0;
            resize: none;
        }

        input, textarea, select {
            background: var(--cl-topbar-color);
            border-radius: var(--cl-border-radius);
            padding: 10px;
            width: calc(100%);
        }

        .form-control, .row, .je-object__container, .je-indented-panel {
            width: 100%;
        }

        .cl-input input[type=file] {
            display: flex;
            gap: 10px;
        }

        .cl-input input[type=file]::file-selector-button {
            border: none;
            padding: 10px;
            color: white;
            background: var(--cl-topbar-color);
            border-radius: var(--cl-border-radius);
            cursor: pointer;
            margin-right: 10px;
            font-family: "Product Sans";
        }

        .cl-input select option {
            color: black;
        }

        .cl-input textarea {
            resize: none;
        }

        .cl-input *:is(textarea, input, select) {
            width: 100%;
        }

        .cl-input.x-resize textarea,
        textarea.x-resize {
            resize: horizontal;
        }

        .cl-input.y-resize textarea
        textarea.y-resize {
            resize: vertical;
        }

        .cl-input input::placeholder,
        .cl-input textarea::placeholder,
        input::placeholder,
        textarea::placeholder {
            color: rgba(255, 255, 255, .5);
        }

        input[type=checkbox] {
            width: 40px !important;
            height: 40px;
            border-radius: var(--cl-border-radius);
            background: var(--cl-topbar-color);
            border: none;
            cursor: pointer;
            appearance: none;
            flex-direction: column;
        }

        input[type=checkbox]::before {
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            width: 100%;
            height: 100%;
            transition: all .125s ease-out;
        }

        input[type=checkbox]:checked::before {
            content: "✓";
            
        }

        .cl-input:has(input:invalid),
        input:invalid {
            border: 1px solid red;
        }

        .cl-input:has(.cl-button) {
            padding: 0 0 0 10px;
            gap: 0;
        }

        .cl-input .cl-button {
            border-radius: 0;
        }

        .cl-input .cl-button:first-child {
            border-top-left-radius: var(--cl-border-radius);
            border-bottom-left-radius: var(--cl-border-radius);
        }

        .cl-input .cl-button:last-child {
            border-top-right-radius: var(--cl-border-radius);
            border-bottom-right-radius: var(--cl-border-radius);
        }

        .cl-horizontal {
            display: flex;
            align-items: center;
            gap: 10px;
            flex-wrap: wrap;
            width: 100%;
        }

        .cl-horizontal.is-centered {
            width: 100%;
            justify-content: center;
        }

        .cl-horizontal.is-spread {
            width: 100%;
            flex-wrap: nowrap;
        }

        .cl-horizontal.is-spread>* {
            width: 100%;
        }

        .cl-button,[class*="json-editor-btn-"] {
            padding: 10px;
            display: flex;
            gap: 10px;
            color: white;
            align-items: center;
            border-radius: var(--cl-border-radius);
            background: var(--cl-topbar-color);
            border: 0px solid;
            transition: all .15s ease;
            text-align: start;
            text-decoration: none;
        }

        .cl-button.hidden {
            display: none;
        }

        .cl-button:hover:not(:disabled) {
            background: #00000010;
        }

        .cl-button:active:not(:disabled) {
            background: #00000020;
        }

        .cl-button:disabled {
            cursor: not-allowed;
            color: var(--cl-topbar-color);
            opacity: 0.5;
        }

        .cl-button[interactive=false] {
            pointer-events: none;
        }

        .cl-button.is-info {
            background: var(--cl-info-color);
        }

        .cl-button.is-warning {
            background: var(--cl-warn-color);
        }

        .cl-button.is-error {
            background: var(--cl-err-color);
        }

        .cl-button.is-loading {
            cursor: progress;
            pointer-events: none;
            opacity: 0.5;
            color: transparent !important;
        }

        .cl-button.is-loading::before {
            content: " ";
            display: block;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            border-right: 2px solid transparent;
            border-left: 2px solid transparent;
            border-bottom: 2px solid white;
            border-top: 2px solid white;
            animation: spin 1s linear infinite;
        }

        .cl-card {
            border-radius: var(--cl-border-radius);
            background: var(--cl-topbar-color);
            overflow: hidden;
        }

        .cl-card .cl-card-top {
            padding: 10px;
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .cl-card .cl-card-bottom {
            padding: 10px;
        }

        .cl-card-grid {
            display: grid !important;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            flex-wrap: wrap;
            gap: 10px;
            width: calc(100% - 10px);
            grid-gap: 10px;
            margin-left: 5px;
            justify-items: center;
        }

        .cl-card-grid[disabled]>* {
            pointer-events: none;
            opacity: 0.5;
            cursor: not-allowed;
        }

        .cl-card-grid>* {
            width: inherit;
        }

        .cl-card-grid.is-loading {
            opacity: .5;
        }

        .cl-card-grid.is-loading * {
            opacity: 0;
            color: transparent;
        }

        .cl-card-grid.is-loading::before {
            content: " ";
            width: 30px;
            height: 30px;
            border-radius: 50%;
            border-top: 2px solid white;
            border-bottom: 2px solid white;
            border-left: 2px solid transparent;
            border-right: 2px solid transparent;
            animation: spin 1s linear infinite;
        }

        .cl-horizontal-card-display {
            max-width: 100%;
            display: flex;
            gap: 10px;
            overflow-x: auto;
        }

        .cl-game {
            flex: 0 0 auto;
            border-radius: var(--cl-border-radius);
            width: 300px;
            height: 200px;
            background-blend-mode: darken;
            background: url("assets/background/game_placeholder.png");
            background-size: cover;
            background-position: center;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-items: start;
            align-items: end;
            padding: 10px;
        }

        .cl-game * {
            margin: 0;
            color: rgba(255, 255, 255, .5);
        }

        .cl-game h1 {
            color: white;
        }

        .cl-gamescore {
            color: orange;
        }

        .cl-table {
            width: 100%;
        }

        .cl-table thead {
            background: var(--cl-topbar-color);
        }

        .cl-table thead th {
            text-align: left;
            padding: 10px;
            font-weight: bold;
        }

        .cl-table tbody tr {
            border-bottom: 1px solid var(--cl-topbar-color);
        }

        .cl-table:not(.is-transparent) tbody tr:nth-child(even) {
            background: var(--cl-topbar-color);
        }

        .cl-table tbody tr td {
            padding: 10px;
        }

        .cl-table tbody:only-child tr td {
            padding: 0;
        }

        .cl-chat-message-container {
            background-color: var(--cl-topbar-color);
            border-radius: var(--cl-border-radius);
            width: calc(100% - 20px);
            list-style: none;
            padding: 10px;
            margin: 0;
            height: calc(100% - 75px);
            overflow-y: scroll;
            scrollbar-width: thin;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .cl-chat-message-container>div {
            background-color: var(--cl-topbar-color);
            border-radius: var(--cl-border-radius);
            padding: 10px;
        }

        .cl-chat-message-container>div>a {
            font-weight: bold;
            text-decoration: none;
        }

        .cl-chat-message-container.unlinkable>div>a {
            pointer-events: none;
        }

        .cl-panel .boxed-content:has(.cl-chat-message-container) .cl-input {
            width: calc(100% - 10px)
        }

        .cl-panel .boxed-content:has(.cl-chat-message-container) .cl-input input {
            width: 100%;
        }

        .cl-video {
            width: 250px;
            border-radius: var(--cl-border-radius);
            background-color: var(--cl-topbar-color);
            text-decoration: none;
            color: white;
            overflow: hidden;
        }

        .cl-video:hover {
            background: var(--cl-inverted-topbar-color);
        }

        .cl-video .cl-video-thumbnail {
            width: 250px;
            aspect-ratio: 16 / 9;
            object-fit: cover;
        }

        .cl-video *:is(h3, h4, small) {
            margin: 8px !important;
        }

        .cl-user {
            width: 250px;
            border-radius: var(--cl-border-radius);
            background: var(--cl-topbar-color);
            display: flex;
            flex-direction: column;
            text-decoration: none;
            overflow: hidden;
        }

        /*.cl-user .cl-user-thumbnail {
            
        }*/
        .cl-user .cl-user-info-box {
            padding: 10px;
            display: flex;
            gap: 10px;
        }

        .cl-user .cl-user-photo {
            width: 55px;
            height: 55px;
            border-radius: 50%;
        }

        .cl-user h3 {
            width: 190px;
            min-height: 15px;
        }

        .cl-game-page {
            background: darkslategray;
            overflow-y: auto;
            display: flex;
            gap: 10px;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .cl-game-page .cl-game-info-box {
            display: flex;
            align-items: center;
            justify-content: space-between;
            width: 75%;
            max-width: 550px;
        }

        .cl-game-page .cl-game-info-box .cl-game-action-box {
            display: flex;
            gap: 10px;
        }

        .cl-game-page .cl-game-info-box h1 {
            margin: 0
        }

        .cl-game-page .cl-game-thumbnail {
            width: 75%;
            max-width: 550px;
            background: var(--cl-topbar-color);
            border-radius: var(--cl-border-radius);
            display: flex;
            justify-content: space-between;
        }

        .cl-game-page .cl-game-image {
            width: 75%;
            max-width: 550px;
            aspect-ratio: 9 / 4;
            border-radius: var(--cl-border-radius);
            object-fit: cover;
        }

        .cl-game-notes-container {
            width: 75%;
            max-width: 550px;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .boxed-content .cl-game-notes-container {
            width: calc(100%);
            max-width: none;
        }

        .cl-game-page p,
        .cl-paragraph {
            width: calc(75% - 20px);
            max-width: 550px;
            padding: 10px;
            margin: 0;
            background: var(--cl-topbar-color);
            border-radius: var(--cl-border-radius);
            text-align: left;
        }

        .cl-paragraph {
            width: calc(100% - 20px);
            max-width: none;
        }

        .cl-container {
            width: calc(100% - 20px);
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .cl-comment {
            padding: 10px;
            width: 100%;
            border-radius: var(--cl-border-radius);
            background: var(--cl-topbar-color);
            display: flex;
            gap: 10px;
        }

        .cl-comment>img {
            width: 45px;
            height: 45px;
            border-radius: 50%;
        }

        .cl-collapsible .cl-collapsible-arrow {
            pointer-events: none;
        }

        .cl-collapsible .cl-collapsible-checkbox {
            position: absolute;
            opacity: 0;
            margin: 6px;
            transform: scale(2.3);
        }

        .cl-collapsible:has(.cl-collapsible-checkbox:not(:checked)) .cl-collapsible-arrow {
            transform: rotate(0deg);
        }

        .cl-collapsible:has(.cl-collapsible-checkbox:checked) .cl-collapsible-arrow {
            transform: rotate(90deg);
        }

        .cl-collapsible:has(.cl-collapsible-checkbox:not(:checked)) .cl-collapsible-content {
            height: 0;
            opacity: 0;
            pointer-events: none;
            display: none;
            transition: height .125s ease-out;
        }

        .cl-collapsible:has(.cl-collapsible-checkbox::checked) .cl-collapsible-content {
            height: auto;
        }

        .cl-game-frame {
            width: 100%;
            height: 100vh;
            background: black;
            outline: 1px solid red;
        }

        .cl-banner {
            border-radius: var(--cl-border-radius);
            object-fit: cover;
            width: 100%;
            max-width: 750px;
            aspect-ratio: 3 / 1;
        }

        .cl-user-thumbnail {
            border-radius: var(--cl-border-radius);
            object-fit: cover;
            width: 250px;
            aspect-ratio: 3 / 1;
        }

        .cl-circular {
            border-radius: 50%;
            background: var(--cl-topbar-color);
            width: 128px;
        }

        .cl-toast-container {
            position: fixed;
            top: 0;
            right: 0;
            width: 550px;
            height: 100vh;
            display: flex;
            flex-direction: column;
            padding: 10px;
            gap: 10px;
            z-index: 1000;
            pointer-events: none;
            overflow: hidden;
        }

        .cl-toast-container>* {
            animation: toast 5s linear;
            opacity: 0;
            text-overflow: clip;
            overflow: hidden;
            flex: 0 0 auto;
        }
        
        .cl-toast-container span {
            text-wrap: wrap;
        }

        .charging {
            color: lightgreen;
        }

        .warning {
            color: yellow;
        }

        .danger {
            color: red;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        @keyframes toast {
            from {
                opacity: 0;
            }

            5%,
            95% {
                opacity: 1;
            }

            to {
                opacity: 0;
            }
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --cl-topbar-color: rgba(0, 0, 0, 0.5);
                --cl-inverted-topbar-color: rgba(255, 255, 255, 0.5);
            }
        }

        @media (prefers-color-scheme: light) {
            :root {
                --cl-topbar-color: rgba(255, 255, 255, 0.5);
                --cl-inverted-topbar-color: rgba(0, 0, 0, 0.5);
            }
        }

        fullscreen .plyr {
            width: 100%;
            height: 100vh;
            position: absolute;
            top: 0; left: 0;
        }

        .plyr h1 {
            position: absolute;
            margin: 0;
            top: 10px;
            left: 20px;
            width: calc(100% - 80px);
            z-index: 1;
        }

        .plyr .cl-button {
            position: absolute;
            top: 10px;
            right: 10px;
            z-index: 5;
        }

        .plyr--hide-controls *:is(h1, .cl-button) {
            opacity: 0;
            pointer-events: none;
        }

        .plyr__time+.plyr__time::before {
            margin: 5px;
        }

        .plyr__progress {
            margin-right: 20px;
            flex: 1;
        }
    </style>
</head>

<body>
    <div class="cl-toast-container" id="app.toastContainer">
        <!--Toasts will be added here dynamically-->
    </div>
    <!--Game Player-->
    <fullscreen class="hidden" id="app.gamePlayer.page">
        <iframe src="/games/game_loader.html" frameborder="0" class="cl-game-frame" id="app.gamePlayer.page.iframe">
            Your browser does not support IFrames.
        </iframe>
    </fullscreen>
    <!--Video Player-->
    <fullscreen class="hidden" id="app.videoPlayer.page">
        <video
            src="https://media.istockphoto.com/id/1392471162/video/circles-in-rhythm-four-corners.mp4?s=mp4-640x640-is&k=20&c=IuLstb-CSuP0jqWW6NyCMMNLRu7enZkuue_DwsPzhzk="
            controls playsinline data-poster id="app.videoPlayer.page.video">

        </video>
    </fullscreen>
    <!--Please wait...-->
    <section class="cl-panel hdden" id="app.loaderScreen">
        <div class="topbar">
            <div class="topbar-left" title="Please wait...">
                <i class="material-symbols-outlined">sync</i>
            </div>
            <div class="topbar-right">
                <h3 class="CL-DateMonitor" title="12:00 PM on January 1, 2025">12:00 PM</h3>
                <span class="material-symbols-outlined CL-BatteryMonitor"
                    title="100%, charging">battery_charging_full</span>
            </div>
        </div>
        <div class="boxed-content">
            <div class="spinner">
                <svg class="circular" viewBox="25 25 50 50">
                    <circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="2" stroke-miterlimit="10" />
                </svg>
            </div>
        </div>
    </section>
    <!--Log In/Sign Up-->
    <section class="cl-panel hidden" id="app.authScreen.page">
        <div class="topbar">
            <div class="topbar-left" title="Log In / Sign Up">
                <i class="material-symbols-outlined">key</i>
            </div>
            <div class="topbar-right">
                <h3 class="CL-DateMonitor" title="12:00 PM on January 1, 2025">12:00 PM</h3>
                <span class="material-symbols-outlined CL-BatteryMonitor"
                    title="100%, charging">battery_charging_full</span>
            </div>
        </div>
        <div class="boxed-content">
            <h1>Log In / Sign Up</h1>
            <div class="cl-button is-info" interactive="false">
                <span class="material-symbols-outlined">info</span>
                <span>If you created your account before June 2025, you'll need to recreate your account due to a database change.</span>
            </div>
            <form>
                <div class="cl-input">
                    <i class="material-symbols-outlined">mail</i>
                    <input type="email" placeholder="Email" id="app.authScreen.page.emailInput">
                </div>
                <div class="cl-input">
                    <i class="material-symbols-outlined">lock</i>
                    <input type="password" placeholder="Password" id="app.authScreen.page.passwordInput">
                </div>
                <div class="cl-input">
                    <i class="material-symbols-outlined">lock</i>
                    <input type="password" placeholder="Confirm password (optional)"
                        id="app.authScreen.page.confirmPasswordInput">
                </div>
            </form>
            <div class="cl-horizontal">
                <button class="cl-button" id="app.authScreen.page.SIBtn">
                    <i class="material-symbols-outlined">check</i>
                    <span>Log In</span>
                </button>
                <button class="cl-button" id="app.authScreen.page.SUBtn">
                    <i class="material-symbols-outlined">add</i>
                    <span>Sign Up</span>
                </button>
            </div>
            <button class="cl-button" id="app.authScreen.page.continueAsGuestBtn">
                <i class="material-symbols-outlined">close</i>
                <span>Continue as Guest</span>
            </button>
        </div>
    </section>
    <!--Home-->
    <section class="cl-panel hidden" id="app.homeScreen.page">
        <div class="topbar">
            <div class="topbar-left" title="Home">
                <i class="material-symbols-outlined">home</i>
            </div>
            <div class="topbar-right">
                <h3 class="CL-DateMonitor" title="12:00 PM on January 1, 2025">12:00 PM</h3>
                <span class="material-symbols-outlined CL-BatteryMonitor"
                    title="100%, charging">battery_charging_full</span>
            </div>
        </div>
        <div class="boxed-content is-not-centered">
            <h1 id="app.homeScreen.page.pageTitle">Welcome (back), User!</h1>
            <div class="cl-card-grid" id="app.homeScreen.page.pageCardsContainer">
                <div class="cl-card">
                    <div class="cl-card-top">
                        <i class="material-symbols-outlined">sports_esports</i>
                        <span>Games</span>
                    </div>
                    <div class="cl-card-bottom">
                        View, play, and discover games.
                    </div>
                </div>
                <div class="cl-card">
                    <div class="cl-card-top">
                        <i class="material-symbols-outlined">deployed_code</i>
                        <span>Minecraft</span>
                    </div>
                    <div class="cl-card-bottom">
                        View, play and add Minecraft versions, mods, worlds
                        and more.
                    </div>
                </div>
                <div class="cl-card">
                    <div class="cl-card-top">
                        <i class="material-symbols-outlined">forum</i>
                        <span>Chat</span>
                    </div>
                    <div class="cl-card-bottom">
                        Chat with other users, or generative AI.
                    </div>
                </div>
                <div class="cl-card">
                    <div class="cl-card-top">
                        <i class="material-symbols-outlined">video_library</i>
                        <span>Videos</span>
                    </div>
                    <div class="cl-card-bottom">
                        Play and discover videos.
                    </div>
                </div>
                <div class="cl-card">
                    <div class="cl-card-top">
                        <i class="material-symbols-outlined">person</i>
                        <span>Users</span>
                    </div>
                    <div class="cl-card-bottom">
                        See all users.
                    </div>
                </div>
                <!--<div class="cl-card">
                        <div class="cl-card-top">
                            <i class="material-symbols-outlined">globe</i>
                            <span>Web</span>
                        </div>
                        <div class="cl-card-bottom">
                            Unblock web pages.
                        </div>
                    </div>-->
                <div class="cl-card">
                    <div class="cl-card-top">
                        <i class="material-symbols-outlined">account_circle</i>
                        <span>Account</span>
                    </div>
                    <div class="cl-card-bottom">
                        Manage your account.
                    </div>
                </div>
                <div class="cl-card">
                    <div class="cl-card-top">
                        <i class="material-symbols-outlined">library_books</i>
                        <span>Content</span>
                    </div>
                    <div class="cl-card-bottom">
                        Manage your videos, games, and other content that
                        has been uploaded to Chillnet.
                    </div>
                </div>
                <div class="cl-card">
                    <div class="cl-card-top">
                        <i class="material-symbols-outlined">shield</i>
                        <span>Admin</span>
                    </div>
                    <div class="cl-card-bottom">
                        Moderate users, videos and games.
                    </div>
                </div>
                <div class="cl-card">
                    <div class="cl-card-top">
                        <i class="material-symbols-outlined">settings</i>
                        <span>Settings</span>
                    </div>
                    <div class="cl-card-bottom">
                        Change your settings.
                    </div>
                </div>
                <div class="cl-card">
                    <div class="cl-card-top">
                        <i class="material-symbols-outlined">help</i>
                        <span>Help</span>
                    </div>
                    <div class="cl-card-bottom">
                        View help articles and other information about
                        Chillnet.
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!--Games-->
    <section class="cl-panel hidden" id="app.gamesScreen.page">
        <div class="topbar">
            <div class="topbar-left" title="Games" data-targetPage="Home">
                <i class="material-symbols-outlined">sports_esports</i>
            </div>
            <div class="topbar-center">
                <button class="cl-button selected" title="New Releases" id="app.gamesScreen.page.newReleases.btn">
                    <span class="material-symbols-outlined">star</span>
                </button>
                <button class="cl-button" title="Search Games" id="app.gamesScreen.page.searchGames.btn">
                    <span class="material-symbols-outlined">search</span>
                </button>
                <button class="cl-button" title="Saved Games" id="app.gamesScreen.page.savedGames.btn">
                    <span class="material-symbols-outlined">bookmarks</span>
                </button>
                <button class="cl-button" title="History" id="app.gamesScreen.page.history.btn">
                    <span class="material-symbols-outlined">history</span>
                </button>
                <button class="cl-button" title="Currently Playing" id="app.gamesScreen.page.currentlyPlaying.btn">
                    <span class="material-symbols-outlined">play_arrow</span>
                </button>
            </div>
            <div class="topbar-right">
                <h3 class="CL-DateMonitor" title="12:00 PM on January 1, 2025">12:00 PM</h3>
                <span class="material-symbols-outlined CL-BatteryMonitor"
                    title="100%, charging">battery_charging_full</span>
            </div>
        </div>
        <div class="boxed-content is-not-centered hidden" id="app.gamesScreen.page.newReleases.boxedContent">
            <div class="cl-card-grid" id="app.gamesScreen.newReleases.boxedContent.cardsContainer"></div>
        </div>
        <div class="boxed-content is-not-centered hidden" id="app.gamesScreen.page.searchGames.boxedContent">
            <div class="cl-horizontal">
                <div class="cl-input">
                    <i class="material-symbols-outlined">search</i>
                    <input type="text" placeholder="Search for a game" id="app.gamesScreen.page.searchGames.boxedContent.searchInput">
                </div>
                <div class="cl-input">
                    <i class="material-symbols-outlined">sort</i>
                    <select id="app.gamesScreen.page.searchGames.boxedContent.sortBySelect">
                        <option value="a-to-z">Name (ascending)</option>
                        <option value="z-to-a">Name (descending)</option>
                        <option value="newest">Newest</option>
                        <option value="oldest">Oldest</option>
                    </select>
                </div>
            </div>
            <div class="cl-card-grid" id="app.gamesScreen.page.searchGames.boxedContent.gamesContainer">
                <div class="cl-game">
                    <div class="cl-game-info">
                        <h1>Game</h1>
                    </div>
                </div>
            </div>
        </div>
        <div class="boxed-content is-not-centered hidden" id="app.gamesScreen.page.savedGames.boxedContent">
            <h1>Saved Games</h1>
            <div class="cl-card-grid" id="app.gamesScreen.page.savedGames.boxedContent.gamesContainer">
                <div class="cl-game">
                    <div class="cl-game-info">
                        <h1>Game</h1>
                    </div>
                </div>
            </div>
        </div>
        <div class="boxed-content is-not-centered hidden" id="app.gamesScreen.page.history.boxedContent">
            <h1>History</h1>
            <div class="cl-card-grid" id="app.gamesScreen.page.history.boxedContent.gamesContainer">
                <div class="cl-game">
                    <div class="cl-game-info">
                        <h1>Game</h1>
                        <small>01-01-2025</small>
                    </div>
                </div>
            </div>
        </div>
        <div class="boxed-content is-not-centered hidden" id="app.gamesScreen.page.currentlyPlaying.boxedContent">
            <h1>Currently Playing</h1>
            <div class="cl-game" id="app.gamesScreen.page.currentlyPlaying.boxedContent.game">
                <div class="cl-game-info">
                    <h1>Game</h1>
                    <small>01-01-2025</small>
                </div>
            </div>
            <div class="cl-card-grid" id="app.gamesScreen.page.currentlyPlaying.boxedContent.actionBtnsContainer">
                <div class="cl-card">
                    <div class="cl-card-top">
                        <i class="material-symbols-outlined">play_arrow</i>
                        <span>Resume</span>
                    </div>
                    <div class="cl-card-bottom">
                        Resume the game.
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!--Game-->
    <fullscreen class="hidden cl-game-page" id="app.gameScreen.page">
        <img src="https://placehold.co/900x400" alt="Game Image" class="cl-game-image"
            id="app.gameScreen.page.gameImage">
        <div class="cl-game-info-box">
            <h1 id="app.gameScreen.page.gameTitle">Game Title</h1>
            <div class="cl-game-action-box" id="app.gameScreen.page.gameActionBox">
                <button class="cl-button">
                    <span class="material-symbols-outlined">play_arrow</span>
                    <span>Play</span>
                </button>
                <button class="cl-button">
                    <span class="material-symbols-outlined">arrow_back</span>
                </button>
            </div>
        </div>
        <div class="cl-game-notes-container" id="app.gameScreen.page.gameNotesContainer">
            <button class="cl-button is-info" interactive="false">
                <span class="material-symbols-outlined">info</span>
                <span>Game info.</span>
            </button>
        </div>
        <p id="app.gameScreen.page.gameDescription">
            Game description...
        </p>
    </fullscreen>
    <!--Minecraft (Eaglercraft)-->
    <section class="cl-panel hidden" id="app.minecraftScreen.page">
        <div class="topbar">
            <div class="topbar-left" title="Minecraft" data-targetPage="Home">
                <i class="material-symbols-outlined">deployed_code</i>
            </div>
            <div class="topbar-center">
                <button class="cl-button selected" title="Versions" id="app.minecraftScreen.page.versions.btn">
                    <span class="material-symbols-outlined">play_arrow</span>
                </button>
                <button class="cl-button" title="Mods" id="app.minecraftScreen.page.mods.btn">
                    <span class="material-symbols-outlined">extension</span>
                </button>
                <button class="cl-button" title="Worlds" id="app.minecraftScreen.page.worlds.btn">
                    <span class="material-symbols-outlined">globe</span>
                </button>
                <button class="cl-button" title="Resource Packs" id="app.minecraftScreen.page.resourcePacks.btn">
                    <span class="material-symbols-outlined">texture</span>
                </button>
            </div>
            <div class="topbar-right">
                <h3 class="CL-DateMonitor" title="12:00 PM on January 1, 2025">12:00 PM</h3>
                <span class="material-symbols-outlined CL-BatteryMonitor"
                    title="100%, charging">battery_charging_full</span>
            </div>
        </div>
        <div class="boxed-content is-not-centered hidden" id="app.minecraftScreen.page.versions.boxedContent">
            <div class="cl-container" id="app.minecraftScreen.page.versions.boxedContent.versionsContainer">
                <div class="cl-collapsible cl-container">
                    <input type="checkbox" class="cl-collapsible-checkbox">
                    <div class="cl-horizontal cl-collapsible-top">
                        <span class="material-symbols-outlined cl-collapsible-arrow">arrow_right</span>
                        <h3>EaglercraftX (1.8.x)</h3>
                    </div>
                    <div class="cl-container cl-collapsible-content">
                        <div class="cl-horizontal">
                            <h3>Version</h3>
                            <button class="cl-button">
                                <span class="material-symbols-outlined">play_arrow</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="boxed-content is-not-centered hdden" id="app.minecraftScreen.page.mods.boxedContent">
            <table class="cl-table">
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Description</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="app.minecraftScreen.page.mods.boxedContent.modsContainer">
                    <tr>
                        <td>Mod</td>
                        <td>Description</td>
                        <td>
                            <div class="cl-horizontal">
                                <button class="cl-button">
                                    <i class="material-symbols-outlined">content_copy</i>
                                </button>
                                <button class="cl-button">
                                    <i class="material-symbols-outlined">download</i>
                                </button>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="boxed-content is-not-centered hidden" id="app.minecraftScreen.page.worlds.boxedContent">
            <table class="cl-table">
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Description</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="app.minecraftScreen.page.worlds.boxedContent.worldsContainer">
                    <tr>
                        <td>World</td>
                        <td>Description</td>
                        <td>
                            <div class="cl-horizontal">
                                <button class="cl-button">
                                    <i class="material-symbols-outlined">download</i>
                                </button>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="boxed-content is-not-centered hidden" id="app.minecraftScreen.page.resourcePacks.boxedContent">
            <table class="cl-table">
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Size (pixels)</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="app.minecraftScreen.page.resourcePacks.boxedContent.resourcePacksContainer">
                    <tr>
                        <td>Mod</td>
                        <td>Description</td>
                        <td>
                            <div class="cl-horizontal">
                                <button class="cl-button">
                                    <i class="material-symbols-outlined">content_copy</i>
                                </button>
                                <button class="cl-button">
                                    <i class="material-symbols-outlined">download</i>
                                </button>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </section>
    <!--Chat-->
    <section class="cl-panel hidden" id="app.chat.page">
        <div class="topbar">
            <div class="topbar-left" title="Chat" data-targetPage="Home">
                <i class="material-symbols-outlined">forum</i>
            </div>
            <div class="topbar-center">
                <button class="cl-button selected" title="With Users" id="app.chat.page.withUsers.btn">
                    <span class="material-symbols-outlined">people</span>
                </button>
                <button class="cl-button" title="AI" id="app.chat.page.ai.btn">
                    <span class="material-symbols-outlined">network_intelligence</span>
                </button>
            </div>
            <div class="topbar-right">
                <h3 class="CL-DateMonitor" title="12:00 PM on January 1, 2025">12:00 PM</h3>
                <span class="material-symbols-outlined CL-BatteryMonitor"
                    title="100%, charging">battery_charging_full</span>
            </div>
        </div>
        <div class="boxed-content is-not-centered hidden" id="app.chat.page.withUsers.boxedContent">
            <div class="cl-chat-message-container" id="app.chat.page.withUsers.boxedContent.messagesContainer">
                <li>
                    <a href="#">User</a>
                    <p>Message Text</p>
                </li>
                <li>
                    <a href="#">User</a>
                    <p>Message Text</p>
                </li>
                <li>
                    <a href="#">User</a>
                    <p>Message Text</p>
                </li>
                <li>
                    <a href="#">User</a>
                    <p>Message Text</p>
                </li>
                <li>
                    <a href="#">User</a>
                    <p>Message Text</p>
                </li>
            </div>
            <div class="cl-input">
                <input type="text" placeholder="Message" id="app.chat.page.withUsers.boxedContent.msgInput">
                <button class="cl-button" id="app.chat.page.withUsers.boxedContent.sendBtn" disabled>
                    <span class="material-symbols-outlined">send</span>
                </button>
                <button class="cl-button" id="app.chat.page.withUsers.boxedContent.announceBtn" disabled>
                    <span class="material-symbols-outlined">campaign</span>
                </button>
            </div>
        </div>
        <div class="boxed-content is-not-centered hidden" id="app.chat.page.ai.boxedContent">
            <div class="cl-chat-message-container" id="app.chat.page.ai.boxedContent.messagesContainer">
                <li>
                    <p>You</p>
                    <p>Message Text</p>
                </li>
                <li>
                    <a>AI</a>
                    <p>Message Text</p>
                </li>
            </div>
            <div class="cl-input">
                <input type="text" placeholder="Note: AI chat requires a Puter account." id="app.chat.page.ai.boxedContent.msgInput">
                <button class="cl-button" id="app.chat.page.ai.boxedContent.sendBtn">
                    <span class="material-symbols-outlined">send</span>
                </button>
            </div>
        </div>
    </section>
    <!--Videos-->
    <section class="cl-panel hidden" id="app.videos.page">
        <div class="topbar">
            <div class="topbar-left" title="Videos" data-targetPage="Home">
                <i class="material-symbols-outlined">video_library</i>
            </div>
            <div class="topbar-center">
                <button class="cl-button selected" title="All Videos" id="app.videos.page.allVideos.btn">
                    <span class="material-symbols-outlined">search</span>
                </button>
                <button class="cl-button" title="History" id="app.videos.page.history.btn">
                    <span class="material-symbols-outlined">history</span>
                </button>
                <button class="cl-button" title="Currently Playing" id="app.videos.page.currentlyPlaying.btn">
                    <span class="material-symbols-outlined">play_arrow</span>
                </button>
            </div>
            <div class="topbar-right">
                <h3 class="CL-DateMonitor" title="12:00 PM on January 1, 2025">12:00 PM</h3>
                <span class="material-symbols-outlined CL-BatteryMonitor"
                    title="100%, charging">battery_charging_full</span>
            </div>
        </div>
        <div class="boxed-content is-not-centered hidden" id="app.videos.page.allVideos">
            <div class="cl-horizontal">
                <div class="cl-input">
                    <span class="material-symbols-outlined">search</span>
                    <input type="text" placeholder="Search for videos" id="app.videos.page.allVideos.searchInput">
                </div>
                <div class="cl-input">
                    <span class="material-symbols-outlined">sort</span>
                    <select id="app.videos.page.allVideos.sortSelect">
                        <option value="most-recent">Newest</option>
                        <option value="most-oldest">Oldest</option>
                        <option value="a-to-z">Name (ascending)</option>
                        <option value="z-to-a">Name (descending)</option>
                    </select>
                </div>
            </div>
            <div class="cl-card-grid" id="app.videos.page.allVideos.list">
                <a href="#" class="cl-video">
                    <img src="https://placehold.co/1600x900" alt="Video" class="cl-video-thumbnail">
                    <h3>Video Title</h3>
                    <h4>Video Author</h4>
                </a>
            </div>
        </div>
        <div class="boxed-content is-not-centered hdden" id="app.videos.page.history">
            <h1>History</h1>
            <div class="cl-card-grid" id="app.videos.page.history.list">
                <a href="#" class="cl-video">
                    <img src="https://placehold.co/1600x900" alt="Video" class="cl-video-thumbnail">
                    <h3>Video Title</h3>
                    <small>01-01-2025</small>
                    <h4>Video Author</h4>
                </a>
            </div>
        </div>
        <div class="boxed-content is-not-centered hidden" id="app.videos.page.currentlyPlaying">
            <h1 id="app.video.page.info.title">Video Title</h1>
            <small id="app.video.page.info.status">Date | Views</small>
            <div class="cl-horizontal">
                <button class="cl-button" id="app.video.page.info.closeBtn">
                    <span class="material-symbols-outlined">close</span>
                    <span>Close</span>
                </button>
                <button class="cl-button" id="app.video.page.info.resumeBtn">
                    <span class="material-symbols-outlined">play_arrow</span>
                    <span>Resume</span>
                </button>
            </div>
            <p id="app.video.page.info.description" class="cl-paragraph">
                Video description...
            </p>
            <div class="cl-input">
                <textarea rows="4" placeholder="Commenting as User"
                    id="app.video.page.comments.commentInput"></textarea>
            </div>
            <div class="cl-horizontal">
                <button class="cl-button" id="app.video.page.comments.sendBtn">
                    <span class="material-symbols-outlined">send</span>
                    <span>Submit</span>
                </button>
            </div>
            <h1 id="app.video.page.comments.amountText">Comments (0)</h1>
            <div class="cl-container" id="app.video.page.comments.commentsContainer">
                <div class="cl-comment">
                    <img src="https://placehold.co/512" alt="User Photo" class="cl-user-photo">
                    <div class="cl-container">
                        <h3>User Name <small>Date</small></h3>
                        <p>Comment content...</p>
                        <div class="cl-horizontal">
                            <button class="cl-button">
                                <span class="material-symbols-outlined">reply</span>
                            </button>
                            <button class="cl-button">
                                <span class="material-symbols-outlined">edit</span>
                            </button>
                            <button class="cl-button">
                                <span class="material-symbols-outlined">delete</span>
                            </button>
                        </div>
                        <div class="cl-collapsible cl-container">
                            <input type="checkbox" class="cl-collapsible-checkbox">
                            <div class="cl-horizontal cl-collapsible-top">
                                <span class="material-symbols-outlined cl-collapsible-arrow">arrow_right</span>
                                <h3>Replies (0)</h3>
                            </div>
                            <div class="cl-container cl-collapsible-content">
                                <div class="cl-comment">
                                    <img src="https://placehold.co/512" alt="User Photo" class="cl-user-photo">
                                    <div class="cl-container">
                                        <h3>User Name <small>Date</small></h3>
                                        <p>Comment content...</p>
                                        <div class="cl-horizontal">
                                            <button class="cl-button">
                                                <span class="material-symbols-outlined">edit</span>
                                            </button>
                                            <button class="cl-button">
                                                <span class="material-symbols-outlined">delete</span>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!--Video-->
    <section class="cl-panel hidden" id="app.video.page">
        <div class="topbar">
            <div class="topbar-left" title="Video" data-targetPage="Videos">
                <i class="material-symbols-outlined">slideshow</i>
            </div>
            <div class="topbar-center">
                <button class="cl-button selected" title="Info" id="app.video.page.info.btn">
                    <span class="material-symbols-outlined">info</span>
                </button>
                <button class="cl-button" title="Comments" id="app.video.page.comments.btn">
                    <span class="material-symbols-outlined">comment</span>
                </button>
            </div>
            <div class="topbar-right">
                <h3 class="CL-DateMonitor" title="12:00 PM on January 1, 2025">12:00 PM</h3>
                <span class="material-symbols-outlined CL-BatteryMonitor"
                    title="100%, charging">battery_charging_full</span>
            </div>
        </div>
        <div class="boxed-content is-not-centered hidden" id="app.video.page.info">
            <h1 id="app.video.page.info.title">Video Title</h1>
            <small id="app.video.page.info.status">Date | Views</small>
            <div class="cl-horizontal">
                <button class="cl-button" id="app.video.page.info.playBtn">
                    <span class="material-symbols-outlined">play_arrow</span>
                    <span>Play</span>
                </button>
                <button class="cl-button" id="app.video.page.info.likeBtn">
                    <span class="material-symbols-outlined no-fill">thumb_up</span>
                    <span>0</span>
                </button>
                <button class="cl-button" id="app.video.page.info.dislikeBtn">
                    <span class="material-symbols-outlined no-fill">thumb_down</span>
                    <span>0</span>
                </button>
            </div>
            <p id="app.video.page.info.description">
                Video description...
            </p>
            <div class="cl-input">
                <textarea rows="4" placeholder="Commenting as User"
                    id="app.video.page.comments.commentInput"></textarea>
            </div>
            <div class="cl-horizontal">
                <button class="cl-button" id="app.video.page.comments.sendBtn">
                    <span class="material-symbols-outlined">send</span>
                    <span>Submit</span>
                </button>
            </div>
            <h1 id="app.video.page.comments.amountText">Comments (0)</h1>
            <div class="cl-container" id="app.video.page.comments.commentsContainer">
                <div class="cl-comment">
                    <img src="https://placehold.co/512" alt="User Photo" class="cl-user-photo">
                    <div class="cl-container">
                        <h3>User Name <small>Date</small></h3>
                        <p>Comment content...</p>
                        <div class="cl-horizontal">
                            <button class="cl-button">
                                <span class="material-symbols-outlined">reply</span>
                            </button>
                            <button class="cl-button">
                                <span class="material-symbols-outlined no-fill">thumb_up</span>
                                <span>0</span>
                            </button>
                            <button class="cl-button">
                                <span class="material-symbols-outlined no-fill">thumb_down</span>
                                <span>0</span>
                            </button>
                            <button class="cl-button">
                                <span class="material-symbols-outlined">edit</span>
                            </button>
                            <button class="cl-button">
                                <span class="material-symbols-outlined">delete</span>
                            </button>
                        </div>
                        <div class="cl-collapsible cl-container">
                            <input type="checkbox" class="cl-collapsible-checkbox">
                            <div class="cl-horizontal cl-collapsible-top">
                                <span class="material-symbols-outlined cl-collapsible-arrow">arrow_right</span>
                                <h3>Replies (0)</h3>
                            </div>
                            <div class="cl-container cl-collapsible-content">
                                <div class="cl-comment">
                                    <img src="https://placehold.co/512" alt="User Photo" class="cl-user-photo">
                                    <div class="cl-container">
                                        <h3>User Name <small>Date</small></h3>
                                        <p>Comment content...</p>
                                        <div class="cl-horizontal">
                                            <button class="cl-button">
                                                <span class="material-symbols-outlined no-fill">thumb_up</span>
                                                <span>0</span>
                                            </button>
                                            <button class="cl-button">
                                                <span class="material-symbols-outlined no-fill">thumb_down</span>
                                                <span>0</span>
                                            </button>
                                            <button class="cl-button">
                                                <span class="material-symbols-outlined">edit</span>
                                            </button>
                                            <button class="cl-button">
                                                <span class="material-symbols-outlined">delete</span>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="boxed-content is-not-centered hdden" id="app.video.page.comments">
            <div class="cl-input">
                <textarea rows="4" placeholder="Commenting as User"
                    id="app.video.page.comments.commentInput"></textarea>
            </div>
            <div class="cl-horizontal">
                <button class="cl-button" id="app.video.page.comments.sendBtn">
                    <span class="material-symbols-outlined">send</span>
                    <span>Submit</span>
                </button>
            </div>
            <h1 id="app.video.page.comments.amountText">Comments (0)</h1>
            <div class="cl-container" id="app.video.page.comments.commentsContainer">
                <div class="cl-comment">
                    <img src="https://placehold.co/512" alt="User Photo" class="cl-user-photo">
                    <div class="cl-container">
                        <h3>User Name <small>Date</small></h3>
                        <p>Comment content...</p>
                        <div class="cl-horizontal">
                            <button class="cl-button">
                                <span class="material-symbols-outlined">reply</span>
                            </button>
                            <button class="cl-button">
                                <span class="material-symbols-outlined no-fill">thumb_up</span>
                                <span>0</span>
                            </button>
                            <button class="cl-button">
                                <span class="material-symbols-outlined no-fill">thumb_down</span>
                                <span>0</span>
                            </button>
                            <button class="cl-button">
                                <span class="material-symbols-outlined">edit</span>
                            </button>
                            <button class="cl-button">
                                <span class="material-symbols-outlined">delete</span>
                            </button>
                        </div>
                        <div class="cl-collapsible cl-container">
                            <input type="checkbox" class="cl-collapsible-checkbox">
                            <div class="cl-horizontal cl-collapsible-top">
                                <span class="material-symbols-outlined cl-collapsible-arrow">arrow_right</span>
                                <h3>Replies (0)</h3>
                            </div>
                            <div class="cl-container cl-collapsible-content">
                                <div class="cl-comment">
                                    <img src="https://placehold.co/512" alt="User Photo" class="cl-user-photo">
                                    <div class="cl-container">
                                        <h3>User Name <small>Date</small></h3>
                                        <p>Comment content...</p>
                                        <div class="cl-horizontal">
                                            <button class="cl-button">
                                                <span class="material-symbols-outlined no-fill">thumb_up</span>
                                                <span>0</span>
                                            </button>
                                            <button class="cl-button">
                                                <span class="material-symbols-outlined no-fill">thumb_down</span>
                                                <span>0</span>
                                            </button>
                                            <button class="cl-button">
                                                <span class="material-symbols-outlined">edit</span>
                                            </button>
                                            <button class="cl-button">
                                                <span class="material-symbols-outlined">delete</span>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!--Users-->
    <section class="cl-panel hidden" id="app.users.page">
        <div class="topbar">
            <div class="topbar-left" title="Users" data-targetPage="Home">
                <i class="material-symbols-outlined">people</i>
            </div>
            <div class="topbar-right">
                <h3 class="CL-DateMonitor" title="12:00 PM on January 1, 2025">12:00 PM</h3>
                <span class="material-symbols-outlined CL-BatteryMonitor"
                    title="100%, charging">battery_charging_full</span>
            </div>
        </div>
        <div class="boxed-content is-not-centered hdden" id="app.users.page.allUsers.boxedContent">
            <div class="cl-card-grid" id="app.users.page.usersContainer">
                <a href="#" class="cl-user">
                    <img src="https://placehold.co/900x300" alt="User Banner" class="cl-user-thumbnail">
                    <div class="cl-user-info-box">
                        <img src="https://placehold.co/512" alt="User Photo" class="cl-user-photo">
                        <h3>User Name</h3>
                    </div>
                </a>
            </div>
        </div>
    </section>
    <!--User-->
    <section class="cl-panel hidden" id="app.user.page">
        <div class="topbar">
            <div class="topbar-left" title="User" data-targetPage="Users">
                <i class="material-symbols-outlined">person</i>
            </div>
            <div class="topbar-center">
                <button class="cl-button selected" title="Info" id="app.user.page.info.btn">
                    <span class="material-symbols-outlined">info</span>
                </button>
                <button class="cl-button" title="Videos" id="app.user.page.videos.btn">
                    <span class="material-symbols-outlined">video_library</span>
                </button>
            </div>
            <div class="topbar-right">
                <h3 class="CL-DateMonitor" title="12:00 PM on January 1, 2025">12:00 PM</h3>
                <span class="material-symbols-outlined CL-BatteryMonitor"
                    title="100%, charging">battery_charging_full</span>
            </div>
        </div>
        <div class="boxed-content is-not-centered hdden" id="app.user.page.info">
            <img src="https://placehold.co/900x300" alt="User Banner" class="cl-banner"
                id="app.user.page.info.userBanner">
            <div class="cl-horizontal is-centered">
                <img src="https://placehold.co/512" alt="User Photo" class="cl-circular"
                    id="app.user.page.info.userPhoto">
                <div>
                    <h1 id="app.user.page.info.userName">User Name</h1>
                    <p id="app.user.page.info.userJoinDate">Joined on January 1, 2025</p>
                    <div class="cl-horizontal" id="app.user.page.info.userActionsContainer"></div>
                </div>
            </div>
            <p class="cl-paragraph" id="app.user.page.info.userBio">
                User bio...
            </p>
            <div class="cl-game-notes-container" id="app.user.page.info.linksContainer">
                <a class="cl-button" href="#">
                    <i class="material-symbols-outlined">link</i>
                    <span>Link</span>
                </a>
            </div>
        </div>
        <div class="boxed-content is-not-centered hidden" id="app.user.page.videos">
            <div class="cl-card-grid" id="app.user.page.videos.videosContainer">
                <a href="#" class="cl-video">
                    <img src="https://placehold.co/1600x900" alt="Video" class="cl-video-thumbnail">
                    <h3>Video Title</h3>
                    <h4>Video Author</h4>
                </a>
            </div>
        </div>
    </section>
    <!--Account-->
    <section class="cl-panel hidden" id="app.account.page">
        <div class="topbar">
            <div class="topbar-left" title="Account" data-targetPage="Home">
                <i class="material-symbols-outlined">account_circle</i>
            </div>
            <div class="topbar-right">
                <h3 class="CL-DateMonitor" title="12:00 PM on January 1, 2025">12:00 PM</h3>
                <span class="material-symbols-outlined CL-BatteryMonitor"
                    title="100%, charging">battery_charging_full</span>
            </div>
        </div>
        <div class="boxed-content hdden" id="app.account.page.accountSettings">
            <button class="cl-button" id="app.account.page.accountSettings.logoutBtn">
                <span class="material-symbols-outlined">logout</span>
                <span>Log Out</span>
            </button>
            <!--<img src="https://placehold.co/900x300" alt="User Banner" class="cl-banner"
                id="app.account.page.accountSettings.userBanner">
            <div class="cl-horizontal is-centered">
                <img src="https://placehold.co/512" alt="User Photo" class="cl-circular"
                    id="app.account.page.accountSettings.userPhoto">
                <div class="cl-input">
                    <span class="material-symbols-outlined">badge</span>
                    <input type="text" placeholder="User Name" minlength="1" maxlength="50"
                        id="app.account.page.accountSettings.userNameInput">
                </div>
            </div>
            <div class="cl-input">
                <span class="material-symbols-outlined">image</span>
                <span>Photo</span>
                <input type="file" placeholder="Photo" id="app.account.page.accountSettings.userPhotoInput">
            </div>
            <div class="cl-input">
                <span class="material-symbols-outlined">panorama</span>
                <span>Banner</span>
                <input type="file" placeholder="Banner" id="app.account.page.accountSettings.userBannerInput">
            </div>
            <div class="cl-horizontal">
                
            </div>
            <div class="cl-input">
                <span class="material-symbols-outlined">article</span>
                <textarea rows="5" cols="45" placeholder="Bio" id="app.account.page.accountSettings.userBioInput"></textarea>
            </div>
            <div class="cl-input">
                <span class="material-symbols-outlined">link</span>
                <textarea rows="5" cols="45" placeholder="List of links, each on a new line"
                    id="app.account.page.accountSettings.userLinksInput"></textarea>
            </div>-->
            <img src="https://placehold.co/900x300" alt="User Banner" class="cl-banner"
                id="app.account.page.accountSettings.userBanner">
            <img src="https://placehold.co/512" alt="User Photo" class="cl-circular"
                id="app.account.page.accountSettings.userPhoto">
            <div class="cl-horizontal" id="app.account.page.accountSettings.profileEditorContainer"></div>
            <div class="cl-horizontal">
                <button class="cl-button" id="app.account.page.accountSettings.saveBtn">
                    <span class="material-symbols-outlined">save</span>
                    <span>Save</span>
                </button>
                <button class="cl-button is-error" id="app.account.page.accountSettings.deleteBtn">
                    <!--Deletes user's account (dangerous action)-->
                    <span class="material-symbols-outlined">delete</span>
                    <span>Delete Account</span>
                </button>
            </div>
        </div>
    </section>
    <!--Content-->
    <section class="cl-panel hidden" id="app.content.page">
        <div class="topbar">
            <div class="topbar-left" title="Content" data-targetPage="Home">
                <i class="material-symbols-outlined">library_books</i>
            </div>
            <div class="topbar-center">
                <button class="cl-button selected" title="Videos" id="app.content.page.videos.btn">
                    <span class="material-symbols-outlined">video_library</span>
                </button>
                <button class="cl-button" title="New Video" id="app.content.page.newVideo.btn">
                    <span class="material-symbols-outlined">video_camera_back_add</span>
                </button>
            </div>
            <div class="topbar-right">
                <h3 class="CL-DateMonitor" title="12:00 PM on January 1, 2025">12:00 PM</h3>
                <span class="material-symbols-outlined CL-BatteryMonitor"
                    title="100%, charging">battery_charging_full</span>
            </div>
        </div>
        <div class="boxed-content is-not-centered hidden" id="app.content.page.videos.boxedContent">
            <table class="cl-table">
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Date Posted</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody id="app.content.page.videos.boxedContent.videosContainer">
                    <tr>
                        <td>Video</td>
                        <td>Date</td>
                        <td>
                            <div class="cl-horizontal">
                                <button class="cl-button">
                                    <i class="material-symbols-outlined">link</i>
                                </button>
                                <button class="cl-button">
                                    <i class="material-symbols-outlined">delete</i>
                                </button>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="boxed-content is-not-centered hidden" id="app.content.page.newVideo.boxedContent">
            <!--<div class="cl-input">
                <span class="material-symbols-outlined">videocam</span>
                <input type="file" id="app.content.page.newVideo.boxedContent.videoInput" accept="video/*" />
            </div>
            <div class="cl-input">
                <span class="material-symbols-outlined">image</span>
                <input type="file" id="app.content.page.newVideo.boxedContent.thumbnailInput" accept="image/*" />
            </div>
            <div class="cl-button is-warning" interactive="false">
                <span class="material-symbols-outlined">warning</span>
                <span>Videos uploaded with extensions other than .mp4, .webm, .mov, .avi, or .ogg may not work
                    correctly.</span>
            </div>
            <div class="cl-input">
                <span class="material-symbols-outlined">title</span>
                <input type="text" id="app.content.page.newVideo.boxedContent.titleInput" placeholder="Title">
            </div>
            <div class="cl-input">
                <span class="material-symbols-outlined">description</span>
                <textarea id="app.content.page.newVideo.boxedContent.descriptionInput" placeholder="Description"
                    rows="5"></textarea>
            </div>-->
            <div id="app.content.page.newVideo.boxedContent.videoEditorContainer"></div>
            <button class="cl-button" id="app.content.page.newVideo.boxedContent.addVideoButton">
                <span class="material-symbols-outlined">add</span>
                <span>Add Video</span>
            </button>
        </div>
    </section>
    <!--Admin-->
    <section class="cl-panel hidden" id="app.admin.page">
        <div class="topbar">
            <div class="topbar-left" title="Admin" data-targetPage="Home">
                <i class="material-symbols-outlined">shield</i>
            </div>
            <div class="topbar-center">
                <button class="cl-button selected" title="Users" id="app.admin.page.users.btn">
                    <span class="material-symbols-outlined">people</span>
                </button>
                <button class="cl-button" title="Videos" id="app.admin.page.videos.btn">
                    <span class="material-symbols-outlined">video_library</span>
                </button>
            </div>
            <div class="topbar-right">
                <h3 class="CL-DateMonitor" title="12:00 PM on January 1, 2025">12:00 PM</h3>
                <span class="material-symbols-outlined CL-BatteryMonitor"
                    title="100%, charging">battery_charging_full</span>
            </div>
        </div>
        <div class="boxed-content is-not-centered hdden" id="app.admin.page.users">
            <table class="cl-table">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Display Name</th>
                        <th>Created Date</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="app.admin.page.users.usersContainer">
                    <tr>
                        <td>ID</td>
                        <td>User Name</td>
                        <td>Date</td>
                        <td>
                            <div class="cl-horizontal">
                                <button class="cl-button">
                                    <i class="material-symbols-outlined">link</i>
                                </button>
                                <button class="cl-button">
                                    <i class="material-symbols-outlined">person_off</i>
                                </button>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="boxed-content is-not-centered hidden" id="app.admin.page.videos">
            <table class="cl-table">
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Date Posted</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody id="app.admin.page.videos.videosContainer">
                    <tr>
                        <td>Video</td>
                        <td>Date</td>
                        <td>
                            <div class="cl-horizontal">
                                <button class="cl-button">
                                    <i class="material-symbols-outlined">link</i>
                                </button>
                                <button class="cl-button">
                                    <i class="material-symbols-outlined">delete</i>
                                </button>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </section>
    <!--Settings-->
    <section class="cl-panel hidden" id="app.settings.page">
        <div class="topbar">
            <div class="topbar-left" title="Settings" data-targetPage="Home">
                <i class="material-symbols-outlined">settings</i>
            </div>
            <div class="topbar-right">
                <h3 class="CL-DateMonitor" title="12:00 PM on January 1, 2025">12:00 PM</h3>
                <span class="material-symbols-outlined CL-BatteryMonitor"
                    title="100%, charging">battery_charging_full</span>
            </div>
        </div>
        <div class="boxed-content is-not-centered hdden" id="app.settings.page.allSettings">
            <input type="text">
            <textarea>test</textarea>
            <table class="cl-table is-transparent">
                <tbody>
                    <tr>
                        <td>Theme</td>
                        <td>
                            <div class="cl-input">
                                <span class="material-symbols-outlined">list</span>
                                <select>
                                    <option value="1">Theme 1</option>
                                    <option value="2">Theme 2</option>
                                </select>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>Mode</td>
                        <td>
                            <div class="cl-input">
                                <span class="material-symbols-outlined">list</span>
                                <select>
                                    <option value="light">Light Mode</option>
                                    <option value="dark">Dark Mode</option>
                                    <option value="system">System Default</option>
                                </select>
                            </div>
                        </td>
                        
                    </tr>
                </tbody>
            </table>
            
        </div>
    </section>
    <!--Help-->
    <section class="cl-panel hidden" id="app.help.page">
        <div class="topbar">
            <div class="topbar-left" title="Help" data-targetPage="Home">
                <i class="material-symbols-outlined">help</i>
            </div>
            <div class="topbar-center">
                <button class="cl-button selected" title="About" id="app.help.page.about.btn">
                    <span class="material-symbols-outlined">info</span>
                </button>
                <button class="cl-button" title="FAQ" id="app.help.page.faq.btn">
                    <span class="material-symbols-outlined">help</span>
                </button>
            </div>
            <div class="topbar-right">
                <h3 class="CL-DateMonitor" title="12:00 PM on January 1, 2025">12:00 PM</h3>
                <span class="material-symbols-outlined CL-BatteryMonitor"
                    title="100%, charging">battery_charging_full</span>
            </div>
        </div>
        <div class="boxed-content hidden" id="app.help.page.about">
            <img src="https://placehold.co/600x100" alt="Chillnet">
            <h1>Made by Combiete Lantey</h1>
        </div>
        <div class="boxed-content is-not-centered hdden" id="app.help.page.faq">
            <div class="cl-collapsible cl-container">
                <input type="checkbox" class="cl-collapsible-checkbox">
                <div class="cl-horizontal cl-collapsible-top">
                    <span class="material-symbols-outlined cl-collapsible-arrow">arrow_right</span>
                    <h3>Will there be any questions here?</h3>
                </div>
                <div class="cl-container cl-collapsible-content">
                    Soon!
                </div>
            </div>
        </div>
    </section>
    <!--Dialog-->
    <section class="cl-panel hidden" id="app.dialog">
        <div class="topbar">
            <div class="topbar-left" title="Message">
                <i class="material-symbols-outlined">info</i>
            </div>
            <div class="topbar-center" id="app.dialog.optionsContainer">
                <button class="cl-button" title="Yes">
                    <span class="material-symbols-outlined">check</span>
                </button>
                <button class="cl-button" title="No">
                    <span class="material-symbols-outlined">close</span>
                </button>
            </div>
            <div class="topbar-right">
                <h3 class="CL-DateMonitor" title="12:00 PM on January 1, 2025">12:00 PM</h3>
                <span class="material-symbols-outlined CL-BatteryMonitor"
                    title="100%, charging">battery_charging_full</span>
            </div>
        </div>
        <div class="boxed-content" id="app.dialog.contentContainer">
            <h1>Are you sure?</h1>
        </div>
    </section>
    <script src="https://cdn.jsdelivr.net/npm/@json-editor/json-editor@latest/dist/jsoneditor.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://js.puter.com/v2/"></script>
    <script src="https://cdn.plyr.io/3.7.8/plyr.js"></script>
    <script>
        const clApp = {};
        clApp.config = {
            parameters: {}, // Key:value pairs of URL parameters.
            persistData: true, // Whether to save data in localStorage. If false, resets settings (dangerous.)
            themes: [
                {
                    name: "Default",
                    code: `
                        background:
                            linear-gradient(217deg, rgba(255, 0, 0, 0.8), rgba(255, 0, 0, 0) 70.71%),
                            linear-gradient(127deg, rgba(0, 255, 0, 0.8), rgba(0, 255, 0, 0) 70.71%),
                            linear-gradient(336deg, rgba(0, 0, 255, 0.8), rgba(0, 0, 255, 0) 70.71%);
                    `
                },
                {
                    name: "Atlantic",
                    code: `
                        --width: .5px; /*Controls border width*/
        background-color: darkcyan;
        background: 
          radial-gradient(circle, transparent 0%, transparent calc(25px - var(--width)), white calc(25px - var(--width)), white calc(25px + var(--width)), transparent calc(25px + var(--width)), transparent calc(50px - var(--width)), white calc(50px - var(--width)), white calc(50px + var(--width)), transparent calc(50px + var(--width))),
          radial-gradient(circle at 100% 0%, transparent 0%, transparent calc(25px - var(--width)), white calc(25px - var(--width)), white calc(25px + var(--width)), transparent calc(25px + var(--width)), transparent calc(50px - var(--width)), white calc(50px - var(--width)), white calc(50px + var(--width)), transparent calc(50px + var(--width))),
          radial-gradient(circle at 100% 50%, transparent 0%, transparent calc(25px - var(--width)), white calc(25px - var(--width)), white calc(25px + var(--width)), transparent calc(25px + var(--width)), transparent calc(50px - var(--width)), white calc(50px - var(--width)), white calc(50px + var(--width)), transparent calc(50px + var(--width))),
          radial-gradient(circle at 100% 100%, transparent 0%, transparent calc(25px - var(--width)), white calc(25px - var(--width)), white calc(25px + var(--width)), transparent calc(25px + var(--width)), transparent calc(50px - var(--width)), white calc(50px - var(--width)), white calc(50px + var(--width)), transparent calc(50px + var(--width))),
          radial-gradient(circle at 50% 100%, transparent 0%, transparent calc(25px - var(--width)), white calc(25px - var(--width)), white calc(25px + var(--width)), transparent calc(25px + var(--width)), transparent calc(50px - var(--width)), white calc(50px - var(--width)), white calc(50px + var(--width)), transparent calc(50px + var(--width))),
          radial-gradient(circle at 0% 100%, transparent 0%, transparent calc(25px - var(--width)), white calc(25px - var(--width)), white calc(25px + var(--width)), transparent calc(25px + var(--width)), transparent calc(50px - var(--width)), white calc(50px - var(--width)), white calc(50px + var(--width)), transparent calc(50px + var(--width))),
          radial-gradient(circle at 0% 50%, transparent 0%, transparent calc(25px - var(--width)), white calc(25px - var(--width)), white calc(25px + var(--width)), transparent calc(25px + var(--width)), transparent calc(50px - var(--width)), white calc(50px - var(--width)), white calc(50px + var(--width)), transparent calc(50px + var(--width))),
          radial-gradient(circle at 50% 0%, transparent 0%, transparent calc(25px - var(--width)), white calc(25px - var(--width)), white calc(25px + var(--width)), transparent calc(25px + var(--width)), transparent calc(50px - var(--width)), white calc(50px - var(--width)), white calc(50px + var(--width)), transparent calc(50px + var(--width))),
          radial-gradient(circle at 0% 0%, transparent 0%, transparent calc(25px - var(--width)), white calc(25px - var(--width)), white calc(25px + var(--width)), transparent calc(25px + var(--width)), transparent calc(50px - var(--width)), white calc(50px - var(--width)), white calc(50px + var(--width)), transparent calc(50px + var(--width))),
          darkcyan;
        background-size: 100px 100px;
                    `  
                },
                {
                    name: "Arrows",
                    code: `
                        background:
        linear-gradient(45deg, #92baac 45px, transparent 45px)64px 64px,
        linear-gradient(45deg, #92baac 45px, transparent 45px,transparent 91px, #e1ebbd 91px, #e1ebbd 135px, transparent 135px),
        linear-gradient(-45deg, #92baac 23px, transparent 23px, transparent 68px,#92baac 68px,#92baac 113px,transparent 113px,transparent 158px,#92baac 158px);
        background-color:#e1ebbd;
        background-size: 128px 128px;
                    `
                },
                {
                    name: "Upholstery",
                    code: `background:
        radial-gradient(hsl(0, 100%, 27%) 4%, hsl(0, 100%, 18%) 9%, hsla(0, 100%, 20%, 0) 9%) 0 0,
        radial-gradient(hsl(0, 100%, 27%) 4%, hsl(0, 100%, 18%) 8%, hsla(0, 100%, 20%, 0) 10%) 50px 50px,
        radial-gradient(hsla(0, 100%, 30%, 0.8) 20%, hsla(0, 100%, 20%, 0)) 50px 0,
        radial-gradient(hsla(0, 100%, 30%, 0.8) 20%, hsla(0, 100%, 20%, 0)) 0 50px,
        radial-gradient(hsla(0, 100%, 20%, 1) 35%, hsla(0, 100%, 20%, 0) 60%) 50px 0,
        radial-gradient(hsla(0, 100%, 20%, 1) 35%, hsla(0, 100%, 20%, 0) 60%) 100px 50px,
        radial-gradient(hsla(0, 100%, 15%, 0.7), hsla(0, 100%, 20%, 0)) 0 0,
        radial-gradient(hsla(0, 100%, 15%, 0.7), hsla(0, 100%, 20%, 0)) 50px 50px,
        linear-gradient(45deg, hsla(0, 100%, 20%, 0) 49%, hsla(0, 100%, 0%, 1) 50%, hsla(0, 100%, 20%, 0) 70%) 0 0,
        linear-gradient(-45deg, hsla(0, 100%, 20%, 0) 49%, hsla(0, 100%, 0%, 1) 50%, hsla(0, 100%, 20%, 0) 70%) 0 0;
        background-color: #300;
        background-size: 100px 100px;`
                },
                {
                    name: "Marrakesh",
                    code: `background-color:white;
        background-image:
        radial-gradient(midnightblue 9px, transparent 10px),
        repeating-radial-gradient(midnightblue 0, midnightblue 4px, transparent 5px, transparent 20px, midnightblue 21px, midnightblue 25px, transparent 26px, transparent 50px);
        background-size: 30px 30px, 90px 90px;
        background-position: 0 0;`
                },
                {
                    name: "Starry Night",
                    code: `background-color:black;
        background-image:
        radial-gradient(white, rgba(255,255,255,.2) 2px, transparent 40px),
        radial-gradient(white, rgba(255,255,255,.15) 1px, transparent 30px),
        radial-gradient(white, rgba(255,255,255,.1) 2px, transparent 40px),
        radial-gradient(rgba(255,255,255,.4), rgba(255,255,255,.1) 2px, transparent 30px);
        background-size: 550px 550px, 350px 350px, 250px 250px, 150px 150px;
        background-position: 0 0, 40px 60px, 130px 270px, 70px 100px;`
                },
                {
                    name: "Yin Yang",
                    code: `background:
        radial-gradient(circle at 50% 59%, #D2CAAB 3%, #364E27 4%, #364E27 11%, rgba(54,78,39,0) 12%, rgba(54,78,39,0)) 50px 0,
        radial-gradient(circle at 50% 41%, #364E27 3%, #D2CAAB 4%, #D2CAAB 11%, rgba(210,202,171,0) 12%, rgba(210,202,171,0)) 50px 0,
        radial-gradient(circle at 50% 59%, #D2CAAB 3%, #364E27 4%, #364E27 11%, rgba(54,78,39,0) 12%, rgba(54,78,39,0)) 0 50px,
        radial-gradient(circle at 50% 41%, #364E27 3%, #D2CAAB 4%, #D2CAAB 11%, rgba(210,202,171,0) 12%, rgba(210,202,171,0)) 0 50px,
        radial-gradient(circle at 100% 50%, #D2CAAB 16%, rgba(210,202,171,0) 17%),
        radial-gradient(circle at 0% 50%, #364E27 16%, rgba(54,78,39,0) 17%),
        radial-gradient(circle at 100% 50%, #D2CAAB 16%, rgba(210,202,171,0) 17%) 50px 50px,
        radial-gradient(circle at 0% 50%, #364E27 16%, rgba(54,78,39,0) 17%) 50px 50px;
        background-color:#63773F;
        background-size:100px 100px;`
                },
                {
                    name: "Brady Bunch",
                    code: `background-image:
        radial-gradient(closest-side, transparent 0%, transparent 75%, #B6CC66 76%, #B6CC66 85%, #EDFFDB 86%, #EDFFDB 94%, #FFFFFF 95%, #FFFFFF 103%, #D9E6A7 104%, #D9E6A7 112%, #798B3C 113%, #798B3C 121%, #FFFFFF 122%, #FFFFFF 130%, #E0EAD7 131%, #E0EAD7 140%),
        radial-gradient(closest-side, transparent 0%, transparent 75%, #B6CC66 76%, #B6CC66 85%, #EDFFDB 86%, #EDFFDB 94%, #FFFFFF 95%, #FFFFFF 103%, #D9E6A7 104%, #D9E6A7 112%, #798B3C 113%, #798B3C 121%, #FFFFFF 122%, #FFFFFF 130%, #E0EAD7 131%, #E0EAD7 140%);
        background-size: 110px 110px;
        background-color: #C8D3A7;
        background-position: 0 0, 55px 55px;`
                },
                {
                    name: "Argyle",
                    code: `background-color: #6d695c;
        background-image:
        repeating-linear-gradient(120deg, rgba(255,255,255,.1), rgba(255,255,255,.1) 1px, transparent 1px, transparent 60px),
        repeating-linear-gradient(60deg, rgba(255,255,255,.1), rgba(255,255,255,.1) 1px, transparent 1px, transparent 60px),
        linear-gradient(60deg, rgba(0,0,0,.1) 25%, transparent 25%, transparent 75%, rgba(0,0,0,.1) 75%, rgba(0,0,0,.1)),
        linear-gradient(120deg, rgba(0,0,0,.1) 25%, transparent 25%, transparent 75%, rgba(0,0,0,.1) 75%, rgba(0,0,0,.1));
        background-size: 70px 120px;`
                },
                {
                    name: "Stairs",
                    code: `background-color: #FF7D9D;
        background-size: 58px 58px;
        background-position: 0px 2px, 4px 35px, 29px 31px, 33px 6px,
        0px 36px, 4px 2px, 29px 6px, 33px 30px;
        background-image:
        linear-gradient(335deg, #C90032 23px, transparent 23px),
        linear-gradient(155deg, #C90032 23px, transparent 23px),
        linear-gradient(335deg, #C90032 23px, transparent 23px),
        linear-gradient(155deg, #C90032 23px, transparent 23px),

        linear-gradient(335deg, #C90032 10px, transparent 10px),
        linear-gradient(155deg, #C90032 10px, transparent 10px),
        linear-gradient(335deg, #C90032 10px, transparent 10px),
        linear-gradient(155deg, #C90032 10px, transparent 10px);`
                },
                {
                    name: "Shippo",
                    code: `background-color:#def;
        background-image: radial-gradient(closest-side, transparent 98%, rgba(0,0,0,.3) 99%),
        radial-gradient(closest-side, transparent 98%, rgba(0,0,0,.3) 99%);
        background-size:80px 80px;
        background-position:0 0, 40px 40px;`
                },
                {
                    name: "Japanese Cube",
                    code: `background-color:#556;
        background-image: linear-gradient(30deg, #445 12%, transparent 12.5%, transparent 87%, #445 87.5%, #445),
        linear-gradient(150deg, #445 12%, transparent 12.5%, transparent 87%, #445 87.5%, #445),
        linear-gradient(30deg, #445 12%, transparent 12.5%, transparent 87%, #445 87.5%, #445),
        linear-gradient(150deg, #445 12%, transparent 12.5%, transparent 87%, #445 87.5%, #445),
        linear-gradient(60deg, #99a 25%, transparent 25.5%, transparent 75%, #99a 75%, #99a),
        linear-gradient(60deg, #99a 25%, transparent 25.5%, transparent 75%, #99a 75%, #99a);
        background-size:80px 140px;
        background-position: 0 0, 0 0, 40px 70px, 40px 70px, 0 0, 40px 70px;`
                },
                {
                    name: "Polka Dot",
                    code: `background-color:#001;
        background-image: radial-gradient(white 15%, transparent 16%),
        radial-gradient(white 15%, transparent 16%);
        background-size: 60px 60px;
        background-position: 0 0, 30px 30px;`
                },
                {
                    name: "Houndstooth",
                    code: `background:
        linear-gradient(-45deg, white 25%, transparent 25%, transparent 75%, black 75%, black) 0 0,
        linear-gradient(-45deg, black 25%, transparent 25%, transparent 75%, white 75%, white) 1em 1em,
        linear-gradient(45deg, black 17%, transparent 17%, transparent 25%, black 25%, black 36%, transparent 36%, transparent 64%, black 64%, black 75%, transparent 75%, transparent 83%, black 83%) 1em 1em;
        background-color: white;
        background-size: 2em 2em;`
                },
                {
                    name: "Tartan",
                    code: `background-color: hsl(2, 57%, 40%);
        background-image: repeating-linear-gradient(transparent, transparent 50px, rgba(0,0,0,.4) 50px, rgba(0,0,0,.4) 53px, transparent 53px, transparent 63px, rgba(0,0,0,.4) 63px, rgba(0,0,0,.4) 66px, transparent 66px, transparent 116px, rgba(0,0,0,.5) 116px, rgba(0,0,0,.5) 166px, rgba(255,255,255,.2) 166px, rgba(255,255,255,.2) 169px, rgba(0,0,0,.5) 169px, rgba(0,0,0,.5) 179px, rgba(255,255,255,.2) 179px, rgba(255,255,255,.2) 182px, rgba(0,0,0,.5) 182px, rgba(0,0,0,.5) 232px, transparent 232px),
        repeating-linear-gradient(270deg, transparent, transparent 50px, rgba(0,0,0,.4) 50px, rgba(0,0,0,.4) 53px, transparent 53px, transparent 63px, rgba(0,0,0,.4) 63px, rgba(0,0,0,.4) 66px, transparent 66px, transparent 116px, rgba(0,0,0,.5) 116px, rgba(0,0,0,.5) 166px, rgba(255,255,255,.2) 166px, rgba(255,255,255,.2) 169px, rgba(0,0,0,.5) 169px, rgba(0,0,0,.5) 179px, rgba(255,255,255,.2) 179px, rgba(255,255,255,.2) 182px, rgba(0,0,0,.5) 182px, rgba(0,0,0,.5) 232px, transparent 232px),
        repeating-linear-gradient(125deg, transparent, transparent 2px, rgba(0,0,0,.2) 2px, rgba(0,0,0,.2) 3px, transparent 3px, transparent 5px, rgba(0,0,0,.2) 5px);`
                },
                {
                    name: "Madras",
                    code: `background-color: hsl(34, 53%, 82%);
        background-image: repeating-linear-gradient(45deg, transparent 5px, hsla(197, 62%, 11%, 0.5) 5px, hsla(197, 62%, 11%, 0.5) 10px,
          hsla(5, 53%, 63%, 0) 10px, hsla(5, 53%, 63%, 0) 35px, hsla(5, 53%, 63%, 0.5) 35px, hsla(5, 53%, 63%, 0.5) 40px,
          hsla(197, 62%, 11%, 0.5) 40px, hsla(197, 62%, 11%, 0.5) 50px, hsla(197, 62%, 11%, 0) 50px, hsla(197, 62%, 11%, 0) 60px,
          hsla(5, 53%, 63%, 0.5) 60px, hsla(5, 53%, 63%, 0.5) 70px, hsla(35, 91%, 65%, 0.5) 70px, hsla(35, 91%, 65%, 0.5) 80px,
          hsla(35, 91%, 65%, 0) 80px, hsla(35, 91%, 65%, 0) 90px, hsla(5, 53%, 63%, 0.5) 90px, hsla(5, 53%, 63%, 0.5) 110px,
          hsla(5, 53%, 63%, 0) 110px, hsla(5, 53%, 63%, 0) 120px, hsla(197, 62%, 11%, 0.5) 120px, hsla(197, 62%, 11%, 0.5) 140px
          ),
        repeating-linear-gradient(135deg, transparent 5px, hsla(197, 62%, 11%, 0.5) 5px, hsla(197, 62%, 11%, 0.5) 10px,
          hsla(5, 53%, 63%, 0) 10px, hsla(5, 53%, 63%, 0) 35px, hsla(5, 53%, 63%, 0.5) 35px, hsla(5, 53%, 63%, 0.5) 40px,
          hsla(197, 62%, 11%, 0.5) 40px, hsla(197, 62%, 11%, 0.5) 50px, hsla(197, 62%, 11%, 0) 50px, hsla(197, 62%, 11%, 0) 60px,
          hsla(5, 53%, 63%, 0.5) 60px, hsla(5, 53%, 63%, 0.5) 70px, hsla(35, 91%, 65%, 0.5) 70px, hsla(35, 91%, 65%, 0.5) 80px,
          hsla(35, 91%, 65%, 0) 80px, hsla(35, 91%, 65%, 0) 90px, hsla(5, 53%, 63%, 0.5) 90px, hsla(5, 53%, 63%, 0.5) 110px,
          hsla(5, 53%, 63%, 0) 110px, hsla(5, 53%, 63%, 0) 140px, hsla(197, 62%, 11%, 0.5) 140px, hsla(197, 62%, 11%, 0.5) 160px
        );`
                },
                {
                    name: "Tablecloth",
                    code: `background-color:white;
        background-image: linear-gradient(90deg, rgba(200,0,0,.5) 50%, transparent 50%),
        linear-gradient(rgba(200,0,0,.5) 50%, transparent 50%);
        background-size:50px 50px;`
                },
                {
                    name: "Cicada Stripes",
                    code: `background-color: #026873;
        background-image: linear-gradient(90deg, rgba(255,255,255,.07) 50%, transparent 50%),
        linear-gradient(90deg, rgba(255,255,255,.13) 50%, transparent 50%),
        linear-gradient(90deg, transparent 50%, rgba(255,255,255,.17) 50%),
        linear-gradient(90deg, transparent 50%, rgba(255,255,255,.19) 50%);
        background-size: 13px, 29px, 37px, 53px;`
                },
                {
                    name: "Cross Dots",
                    code: `background:
            radial-gradient(black 3px, transparent 4px),
            radial-gradient(black 3px, transparent 4px),
            linear-gradient(#fff 4px, transparent 0),
            linear-gradient(45deg, transparent 74px, transparent 75px, #a4a4a4 75px, #a4a4a4 76px, transparent 77px, transparent 109px),
            linear-gradient(-45deg, transparent 75px, transparent 76px, #a4a4a4 76px, #a4a4a4 77px, transparent 78px, transparent 109px),
            #fff;
            background-size: 109px 109px, 109px 109px,100% 6px, 109px 109px, 109px 109px;
            background-position: 54px 55px, 0px 0px, 0px 0px, 0px 0px, 0px 0px;`
                },
                {
                    name: "Christmas Trees",
                    code: `--s: 75px; /* control the size */

          --_c: #0000, #fff 1deg 79deg, #0000 81deg;
          --g0: conic-gradient(from 140deg at 50% 87.5%, var(--_c));
          --g1: conic-gradient(from 140deg at 50% 81.25%, var(--_c));
          --g2: conic-gradient(from 140deg at 50% 75%, var(--_c));
          --g3: conic-gradient(at 10% 20%, #0000 75%, #fff 0);
          background: var(--g0) 0 calc(var(--s) / -4),
            var(--g0) var(--s) calc(3 * var(--s) / 4), var(--g1),
            var(--g1) var(--s) var(--s), var(--g2) 0 calc(var(--s) / 4),
            var(--g2) var(--s) calc(5 * var(--s) / 4),
            var(--g3) calc(var(--s) / -10) var(--s),
            var(--g3) calc(9 * var(--s) / 10) calc(2 * var(--s)),
            repeating-conic-gradient(from 45deg, #a31e39 0 25%, #31570e 0 50%);
          background-size: calc(2 * var(--s)) calc(2 * var(--s));`
                }
            ],
            elementPageIdMap: {
                "gamePlayer": "app.gamePlayer.page",
                "videoPlayer": "app.videoPlayer.page",
                "loader": "app.loaderScreen",
                "auth": "app.authScreen.page",
                "home": "app.homeScreen.page",
                "games": "app.gamesScreen.page",
                "game": "app.gameScreen.page",
                "minecraft": "app.minecraftScreen.page",
                "chat": "app.chat.page",
                "videos": "app.videos.page",
                "video": "app.video.page",
                "users": "app.users.page",
                "user": "app.user.page",
                "account": "app.account.page",
                "content": "app.content.page",
                "admin": "app.admin.page",
                "settings": "app.settings.page",
                "help": "app.help.page",
            },
            pageCards: [
                {
                    title: "Games",
                    icon: "sports_esports",
                    description: "View, play and discover new games."
                },
                {
                    title: "Minecraft",
                    icon: "deployed_code",
                    description: "View, play and add Minecraft versions, mods, worlds and more."
                },
                {
                    title: "Chat",
                    icon: "forum",
                    description: "Chat with other users or generative AI.",
                    requiresAccount: true,
                },
                {
                    title: "Videos",
                    icon: "video_library",
                    description: "Watch and discover new videos."
                },
                {
                    title: "Users",
                    icon: "people",
                    description: "See all users."
                },
                {
                    title: "Account",
                    icon: "account_circle",
                    description: "Manage your account.",
                    requiresAccount: true
                },
                {
                    title: "Content",
                    icon: "library_books",
                    description: "Manage your content.",
                    requiresAccount: true,
                },
                {
                    title: "Admin",
                    icon: "shield",
                    description: "Manage the site.",
                    isDashboard: true,
                    requiresAccount: true,
                },
                {
                    title: "Settings",
                    icon: "settings",
                    description: "Manage the site settings."
                },
                {
                    title: "Help",
                    icon: "help",
                    description: "View help articles and other information about Chillnet."
                }
            ],
            dialogElement: {
                panelId: "app.dialog",
                optionsContainerId: "app.dialog.optionsContainer",
                contentContainerId: "app.dialog.contentContainer"
            },
            pages: [
                {
                    name: "Loader",
                    id: "app.loaderScreen",
                },
                {
                    name: "Auth",
                    id: "app.authScreen.page",
                },
                {
                    name: "Home",
                    id: "app.homeScreen.page",
                },
                {
                    name: "Games",
                    id: "app.gamesScreen.page",
                    subpages: [
                        {
                            name: "New Releases",
                            id: "app.gamesScreen.page.newReleases.boxedContent",
                            btn: "app.gamesScreen.page.newReleases.btn",
                        },
                        {
                            name: "Search Games",
                            id: "app.gamesScreen.page.searchGames.boxedContent",
                            btn: "app.gamesScreen.page.searchGames.btn",
                        },
                        {
                            name: "Saved Games",
                            id: "app.gamesScreen.page.savedGames.boxedContent",
                            btn: "app.gamesScreen.page.savedGames.btn",
                        },
                        {
                            name: "History",
                            id: "app.gamesScreen.page.history.boxedContent",
                            btn: "app.gamesScreen.page.history.btn",
                        },
                        {
                            name: "Currently Playing",
                            id: "app.gamesScreen.page.currentlyPlaying.boxedContent",
                            btn: "app.gamesScreen.page.currentlyPlaying.btn",
                        },
                    ],
                },
                {
                    name: "Game",
                    id: "app.gameScreen.page"
                },
                {
                    name: "Minecraft",
                    id: "app.minecraftScreen.page",
                    subpages: [
                        {
                            name: "Versions",
                            id: "app.minecraftScreen.page.versions.boxedContent",
                            btn: "app.minecraftScreen.page.versions.btn",
                        },
                        {
                            name: "Mods",
                            id: "app.minecraftScreen.page.mods.boxedContent",
                            btn: "app.minecraftScreen.page.mods.btn",
                        },
                        {
                            name: "Worlds",
                            id: "app.minecraftScreen.page.worlds.boxedContent",
                            btn: "app.minecraftScreen.page.worlds.btn",
                        },
                        {
                            name: "Resource Packs",
                            id: "app.minecraftScreen.page.resourcePacks.boxedContent",
                            btn: "app.minecraftScreen.page.resourcePacks.btn",
                        },
                    ],
                },
                {
                    name: "Chat",
                    id: "app.chat.page",
                    subpages: [
                        {
                            name: "With Users",
                            id: "app.chat.page.withUsers.boxedContent",
                            btn: "app.chat.page.withUsers.btn",
                        },
                        {
                            name: "With AI",
                            id: "app.chat.page.ai.boxedContent",
                            btn: "app.chat.page.ai.btn",
                        },
                    ],
                },
                {
                    name: "Videos",
                    id: "app.videos.page",
                    subpages: [
                        {
                            name: "All Videos",
                            id: "app.videos.page.allVideos",
                            btn: "app.videos.page.allVideos.btn",
                        },
                        {
                            name: "History",
                            id: "app.videos.page.history",
                            btn: "app.videos.page.history.btn",
                        },
                        {
                            name: "Currently Playing",
                            id: "app.videos.page.currentlyPlaying",
                            btn: "app.videos.page.currentlyPlaying.btn",
                        },
                    ]
                },
                {
                    name: "Users",
                    id: "app.users.page",
                },
                {
                    name: "User",
                    id: "app.user.page",
                    subpages: [
                        {
                            name: "Info",
                            id: "app.user.page.info",
                            btn: "app.user.page.info.btn",
                        },
                        {
                            name: "Videos",
                            id: "app.user.page.videos",
                            btn: "app.user.page.videos.btn",
                        },
                    ],
                },
                {
                    name: "Account",
                    id: "app.account.page",
                },
                {
                    name: "Content",
                    id: "app.content.page",
                    subpages: [
                        {
                            name: "Videos",
                            id: "app.content.page.videos.boxedContent",
                            btn: "app.content.page.videos.btn",
                        },
                        {
                            name: "New Video",
                            id: "app.content.page.newVideo.boxedContent",
                            btn: "app.content.page.newVideo.btn",
                        },
                    ],
                },
                {
                    name: "Admin",
                    id: "app.admin.page",
                    subpages: [
                        {
                            name: "Users",
                            id: "app.admin.page.users",
                            btn: "app.admin.page.users.btn",
                        },
                        {
                            name: "Videos",
                            id: "app.admin.page.videos",
                            btn: "app.admin.page.videos.btn",
                        },
                    ],
                },
                {
                    name: "Settings",
                    id: "app.settings.page",
                },
                {
                    name: "Help",
                    id: "app.help.page",
                    subpages: [
                        {
                            name: "About",
                            id: "app.help.page.about",
                            btn: "app.help.page.about.btn",
                        },
                        {
                            name: "FAQ",
                            id: "app.help.page.faq",
                            btn: "app.help.page.faq.btn",
                        },
                    ],
                },
            ],
            content: {
                games: [
                    {
                        title: "2048",
                        description: "A simple and addictive puzzle game where you combine tiles to reach 2048.",
                        photo: "/games/static/2048/meta/apple-touch-icon.png",
                        link: "/games/static/2048/index.html",
                        download: "/games/static/2048/2048.zip",
                        date: new Date("2025-06-09"),
                        id: "1",
                    },
                    {
                        title: "BitLife",
                        description: "BitLife is a text-based game that lets you control a virtual character's life from birth to death. You can make choices that influence your career, relationships, education, crime, health, and more.",
                        photo: "/games/static/bitlife/logo.png",
                        link: "/games/static/bitlife/index.html",
                        download: "/games/static/bitlife/bitlife.zip",
                        date: new Date("2025-6-11"),
                        id: "2",
                    },
                ],
                minecraft: {
                    versions: [
                        {
                            title: "Early Betas",
                            vers: [
                                {
                                    name: "1.3 Beta 1",
                                    link: "/eaglercraft/1.3/1.3b01.html",
                                },
                            ],
                        },
                        {
                            title: "Eaglercraft (1.5.x)",
                            vers: [
                                {
                                    name: "1.5.2 Service Pack 1",
                                    link: "/eaglercraft/1.5.2/1.5.2_SP1.html",
                                },
                                {
                                    name: "1.5.2 CoderCraft",
                                    link: "/eaglercraft/1.5.2/1.5.2CoderCraft.html",
                                },
                                {
                                    name: "1.5.2 FuchsiaX",
                                    link: "/eaglercraft/1.5.2/1.5.2FuchsiaX.html",
                                },
                                {
                                    name: "1.5.2 Kerosene",
                                    link: "/eaglercraft/1.5.2/1.5.2Kerosene.html",
                                },
                                {
                                    name: "1.5.2 Nit Client 1.1",
                                    link: "/eaglercraft/1.5.2/1.5.2NitClient1.1.html",
                                },
                                {
                                    name: "1.5.2 Nova Client",
                                    link: "/eaglercraft/1.5.2/1.5.2NovaClient.html",
                                },
                                {
                                    name: "1.5.2 OddFuture Client",
                                    link: "/eaglercraft/1.5.2/1.5.2OddFutureClient.html",
                                },
                                {
                                    name: "1.5.2 Precision Client 0.1.8.4 Beta",
                                    link: "/eaglercraft/1.5.2/1.5.2PrecisionClientb0.1.8.4.html",
                                },
                            ],
                        },
                        {
                            title: "EaglercraftX (1.8.x)",
                            vers: [
                                {
                                    name: "1.8.8 Eagler Reborn 1.1 Beta",
                                    link: "/eaglercraft/1.8.8/1.8.8EaglerRebornb1.1.html",
                                },
                                {
                                    name: "1.8.8 Shadow Client 3.0",
                                    link: "/eaglercraft/1.8.8/1.8.8ShadowClient3.0.html",
                                },
                                {
                                    name: "1.8.8 u15 Pi Client",
                                    link: "/eaglercraft/1.8.8/1.8.8u15PiClient.html",
                                },
                                {
                                    name: "1.8.8 u18",
                                    link: "/eaglercraft/1.8.8/1.8.8u18.html",
                                },
                                {
                                    name: "1.8.8 u18 DragonX Lite",
                                    link: "/eaglercraft/1.8.8/1.8.8u18DragonXLite.html",
                                },
                                {
                                    name: "1.8.8 u18 Nebula",
                                    link: "/eaglercraft/1.8.8/1.8.8u18Nebula.html",
                                },
                                {
                                    name: "1.8.8 u22",
                                    link: "/eaglercraft/1.8.8/1.8.8u22.htm",
                                },
                                {
                                    name: "1.8.8 u23",
                                    link: "/eaglercraft/1.8.8/1.8.8u23.htm",
                                },
                                {
                                    name: "1.8.8 u27",
                                    link: "/eaglercraft/1.8.8/1.8.8u27.htm",
                                },
                                {
                                    name: "1.8.8 u29",
                                    link: "/eaglercraft/1.8.8/1.8.8u29.htm",
                                },
                                {
                                    name: "1.8.8 u30",
                                    link: "/eaglercraft/1.8.8/1.8.8u30.htm",
                                },
                                {
                                    name: "1.8.8 u31",
                                    link: "/eaglercraft/1.8.8/1.8.8u31.htm",
                                },
                                {
                                    name: "1.8.8 u32",
                                    link: "/eaglercraft/1.8.8/1.8.8u32.htm",
                                },
                                {
                                    name: "1.8.8 u33",
                                    link: "/eaglercraft/1.8.8/1.8.8u33.htm",
                                },
                                {
                                    name: "1.8.8 u34",
                                    link: "/eaglercraft/1.8.8/1.8.8u34.htm",
                                },
                                {
                                    name: "1.8.8 u35",
                                    link: "/eaglercraft/1.8.8/1.8.8u35.htm",
                                },
                                {
                                    name: "1.8.8 u39",
                                    link: "/eaglercraft/1.8.8/1.8.8u39.html",
                                },
                                {
                                    name: "1.8.8 u48",
                                    link: "/eaglercraft/1.8.8/1.8.8u48.html",
                                },
                                {
                                    name: "1.8.8 u50",
                                    link: "/eaglercraft/1.8.8/1.8.8u50.html",
                                },
                                {
                                    name: "1.8.8 u50 (EFI)",
                                    link: "/eaglercraft/1.8.8/1.8.8u50Forge.html"
                                }
                            ],
                        },
                        {
                            title: "EaglercraftL (1.9.x)",
                            vers: [
                                {
                                    name: "1.9.4 u35",
                                    link: "/eaglercraft/1.9.4/1.9.4u35.html",
                                },
                            ],
                        },
                    ],
                    mods: [
                        {
                            name: "CustomItems",
                            description: "Library to make adding custom items easier",
                            link: "/eaglercraft/forgeinjector/examplemods/lib.customitems.js",
                        },
                        {
                            name: "WorldEdit",
                            description: "Easy world editing using //set and //walls (requires CustomItems library)",
                            link: "/eaglercraft/forgeinjector/examplemods/Worldedit.js",
                        },
                    ],
                    maps: [
                        /*
                        {
                            name: "Map",
                            description: "Description.",
                            link: "relative/path/to/file",
                        }
                        */
                    ],
                    resourcePacks: [
                        /*
                        {
                            name: "Resource / Texture Pack",
                            size: 16,
                            link: "relative/path/to/file",
                        }
                        */
                    ],
                },
            },
            toastContainer: "app.toastContainer",
        };

        clApp.elementUtility = {
            removeAllChildren(element) {
                while (element.firstChild) {
                    element.removeChild(element.firstChild);
                }
            },
            enterFullscreen(element) {
                if (element.requestFullscreen) {
                    element.requestFullscreen();
                } else if (element.mozRequestFullScreen) { // Firefox
                    element.mozRequestFullScreen();
                } else if (element.webkitRequestFullscreen) { // Chrome, Safari, Edge
                    element.webkitRequestFullscreen();
                } else if (element.msRequestFullscreen) { // IE/Edge
                    element.msRequestFullscreen();
                }
            },
            exitFullscreen() {
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                } else if (document.mozCancelFullScreen) {
                    document.mozCancelFullScreen();
                } else if (document.webkitExitFullscreen) {
                    document.webkitExitFullscreen();
                } else if (document.msExitFullscreen) {
                    document.msExitFullscreen();
                }
            },
        };

        clApp.dateUtility = {
            isWithinPastMonth(date) {
                const now = new Date();
                const pastMonth = new Date(now.getFullYear(), now.getMonth() - 1, now.getDate());
                return date >= pastMonth && date <= now;
            },
        }

        clApp.stringUtility = {
            secondsToMinuteWithSeconds(seconds) {
                const minutes = Math.floor(seconds / 60);
                const secs = seconds % 60;
                return `${minutes}m:${secs < 10 ? '0' + secs : secs}s`;
            },
            secondsToHourWithMinutes(seconds) {
                const hours = Math.floor(seconds / 3600);
                const minutes = Math.floor((seconds % 3600) / 60);
                return `${hours}h:${minutes < 10 ? '0' + minutes : minutes}m`;
            },
            truncate(str, length) {
                if (str.length <= length) return str;
                return str.substring(0, length - 3) + "...";
            },
            copyToClipboard(text) {
                const textarea = document.createElement('textarea');
                textarea.value = text;
                document.body.appendChild(textarea);
                textarea.select();
                document.execCommand('copy');
                document.body.removeChild(textarea);
                clApp.toast("info", "Text copied to clipboard!");
            },
        };

        clApp.button = {
            create(icon, text = null, interactive = true, title = null, onclick = (e) => {}) {
                const newBtn = document.createElement("button");
                newBtn.innerHTML = `
                    <span class="material-symbols-outlined">${icon}</span>
                    ${text ? `<span>${text}</span>` : ""}
                `;
                if (title) newBtn.title = title;
                newBtn.onclick = onclick;
                newBtn.classList.add("cl-button");
                newBtn.setAttribute("interactive", interactive);
                return newBtn;
            }
        };

        clApp.input = {
            create(type, placeholder = null, value = null, accept = null, onchange = (e) => {}) {
                const container = document.createElement("div");
                container.classList.add("cl-input");
                const iconSpan = document.createElement("span");
                iconSpan.classList.add("material-symbols-outlined");
                switch (type) {
                    case "text":
                        iconSpan.innerText = "text_fields";
                        break;
                    case "textarea":
                        iconSpan.innerText = "text_fields";
                        break;
                    case "password":
                        iconSpan.innerText = "lock";
                        break;
                    case "email":
                        iconSpan.innerText = "mail";
                        break;
                    case "number":
                        iconSpan.innerText = "123";
                        break;
                    case "file":
                        iconSpan.innerText = "attach_file";
                        break;
                    default:
                        iconSpan.innerText = "edit_note";
                }
                container.appendChild(iconSpan);
                if (type === "textarea") {
                    const textarea = document.createElement("textarea");
                    textarea.placeholder = placeholder || "";
                    textarea.value = value || "";
                    textarea.rows = 5;
                    textarea.cols = 50;
                    container.appendChild(textarea);
                    return container;
                }
                const input = document.createElement("input");
                input.type = type;
                if (placeholder) input.placeholder = placeholder;
                if (value) input.value = value;
                if (accept) input.accept = accept;
                input.onchange = onchange;
                container.appendChild(input);
                return container;
            }
        };

        clApp.dialog = {
            alert(message) {
                return new Promise((resolve) => {
                    document.getElementById(clApp.config.dialogElement.panelId).classList.remove("hidden");
                    document.getElementById(clApp.config.dialogElement.contentContainerId).innerHTML = message;
                    clApp.elementUtility.removeAllChildren(document.getElementById(clApp.config.dialogElement.optionsContainerId));
                    const okButton = clApp.button.create("check", null, true, "OK", () => {
                        document.getElementById(clApp.config.dialogElement.panelId).classList.add("hidden");
                        resolve();
                    });
                    document.getElementById(clApp.config.dialogElement.optionsContainerId).appendChild(okButton);
                });
            },
            prompt(message, type, value = null) {
                return new Promise((resolve) => {
                    document.getElementById(clApp.config.dialogElement.panelId).classList.remove("hidden");
                    document.getElementById(clApp.config.dialogElement.contentContainerId).innerHTML = message;
                    clApp.elementUtility.removeAllChildren(document.getElementById(clApp.config.dialogElement.optionsContainerId));
                    const input = clApp.input.create(type, "Enter value", value || "", (e) => {
                        if (e.target.value) {
                            resolve(e.target.value);
                            document.getElementById(clApp.config.dialogElement.panelId).classList.add("hidden");
                        }
                    });
                    document.getElementById(clApp.config.dialogElement.contentContainerId).appendChild(input);
                    document.getElementById(clApp.config.dialogElement.optionsContainerId).appendChild(clApp.button.create("check", null, true, "OK", () => {
                        if (input.querySelector("textarea").value) {
                            resolve(input.querySelector("textarea").value);
                            document.getElementById(clApp.config.dialogElement.panelId).classList.add("hidden");
                        }
                    }));
                    document.getElementById(clApp.config.dialogElement.optionsContainerId).appendChild(clApp.button.create("close", null, true, "Cancel", () => {
                        document.getElementById(clApp.config.dialogElement.panelId).classList.add("hidden");
                        resolve(null);
                    }));
                });
            },
            confirm(message) {
                return new Promise((resolve) => {
                    document.getElementById(clApp.config.dialogElement.panelId).classList.remove("hidden");
                    document.getElementById(clApp.config.dialogElement.contentContainerId).innerHTML = message;
                    clApp.elementUtility.removeAllChildren(document.getElementById(clApp.config.dialogElement.optionsContainerId));
                    const okButton = clApp.button.create("check", null, true, "Yes", () => {
                        document.getElementById(clApp.config.dialogElement.panelId).classList.add("hidden");
                        resolve(true);
                    });
                    const cancelButton = clApp.button.create("close", null, true, "No", () => {
                        document.getElementById(clApp.config.dialogElement.panelId).classList.add("hidden");
                        resolve(false);
                    });
                    document.getElementById(clApp.config.dialogElement.optionsContainerId).appendChild(okButton);
                    document.getElementById(clApp.config.dialogElement.optionsContainerId).appendChild(cancelButton);
                });
            }
        };

        clApp.pages = {
            resetAll() {
                clApp.config.pages.forEach(page => {
                    const pageElement = document.getElementById(page.id);
                    if (pageElement) {
                        pageElement.classList.add("hidden");
                    }
                    if (page.subpages) {
                        page.subpages.forEach((subpage, index) => {
                            const subpageElement = document.getElementById(subpage.id);
                            const subpageBtn = document.getElementById(subpage.btn);
                            if (subpageElement) {
                                subpageElement.classList.add("hidden");
                                //if (index == 0) subpageElement.classList.remove("hidden");
                                subpageBtn.classList.remove("selected");
                            }
                        });
                    }
                });
            },
            init() {
                this.resetAll();
                const topbarLeftElements = document.querySelectorAll(".topbar-left");
                topbarLeftElements.forEach(el => {
                    if (!el.getAttribute("data-targetPage")) {
                        console.warn("Element with class 'topbar-left' does not have a data-target-page attribute.");
                        return;
                    }
                    el.onclick = () => {
                        clApp.pages.open(el.getAttribute("data-targetPage"));
                    };
                });
                clApp.config.pages.forEach(page => {
                    const pageElement = document.getElementById(page.id);
                    if (pageElement) {
                        if (page.subpages) {
                            page.subpages.forEach((subpage) => {
                                //clApp.elementUtility.removeAllChildren(document.getElementById(clApp.config.toastContainer));
                                //clApp.toast("info", `Initializing subpage: ${subpage.name}`);
                                const subpageElement = document.getElementById(subpage.id);
                                const subpageBtn = document.getElementById(subpage.btn);
                                subpageBtn.onclick = () => this.open(page.name, subpage.name);
                            });
                        }
                    } else {
                        console.warn(`Page element with ID "${page.id}" not found.`);
                    }
                });
            },
            open(name, subpageName = null) {
                this.resetAll();
                const page = clApp.config.pages.find(p => p.name === name);
                if (page) {
                    const pageElement = document.getElementById(page.id);
                    if (pageElement) {
                        pageElement.classList.remove("hidden");
                    }
                    if (subpageName && page.subpages) {
                        const subpage = page.subpages.find(sp => sp.name === subpageName);
                        if (subpage) {
                            const subpageElement = document.getElementById(subpage.id);
                            const subpageBtn = document.getElementById(subpage.btn);
                            subpageElement.classList.remove("hidden");
                            subpageBtn.classList.add("selected");
                        }
                    } else if (page.subpages && page.subpages.length > 0) {
                        const firstSubpage = page.subpages[0];
                        const firstSubpageElement = document.getElementById(firstSubpage.id);
                        const firstBtn = document.getElementById(firstSubpage.btn);
                        if (firstSubpageElement) {
                            firstSubpageElement.classList.remove("hidden");
                            //clApp.toast("")
                            firstBtn.classList.add("selected");
                        }
                    }
                } else {
                    clApp.dialog.alert(`Page "${name}" not found.`);
                }
            },
            find(name, subpageName = null) {
                const page = clApp.config.pages.find(p => p.name === name);
                if (page) {
                    if (subpageName && page.subpages) {
                        return page.subpages.find(sp => sp.name === subpageName);
                    }
                    return page;
                }
                return null;
            },
            hide(name, subpageName) {
                const page = clApp.config.pages.find(p => p.name === name);
                if (page) {
                    const subpage = document.getElementById(page.subpages.find(s => s.name === subpageName).id);
                    const subpageBtn = document.getElementById(page.subpages.find(s => s.name === subpageName).btn);
                    subpageBtn.classList.add("hidden");
                    this.open(name);
                }
            },
            show(name, subpageName) {
                const page = clApp.config.pages.find(p => p.name === name);
                if (page) {
                    const subpage = document.getElementById(page.subpages.find(s => s.name === subpageName).id);
                    const subpageBtn = document.getElementById(page.subpages.find(s => s.name === subpageName).btn);
                    subpageBtn.classList.remove("hidden");
                }
            },
            createCards(container, pages) {
                const containerElement = document.getElementById(container);
                if (!containerElement) {
                    console.error(`Container with ID "${container}" not found.`);
                    return;
                }
                clApp.elementUtility.removeAllChildren(containerElement);
                pages.forEach(page => {
                    const card = document.createElement("div");
                    card.classList.add("cl-card");
                    card.innerHTML = `
                        <div class="cl-card-top">
                            <i class="material-symbols-outlined">${page.icon}</i>
                            <h3>${page.title}</h3>
                        </div>
                        <div class="cl-card-bottom">
                            <p>${page.description}</p>
                        </div>
                    `;
                    card.onclick = () => {
                        if (page.requiresAccount) {
                            clApp.pages.open("Loader");
                            clApp.supabase.getUserProfile().then(profile => {
                                if (profile) {
                                    if (page.isDashboard) {
                                        if (profile.is_admin) clApp.pages.open(page.title);
                                        else {
                                            clApp.toast("error", "You do not have permission to perform this action.");
                                            clApp.pages.open("Home");
                                        }
                                    } else clApp.pages.open(page.title);
                                } else clApp.pages.open("Auth");
                            });
                        } else clApp.pages.open(page.title);
                    };
                    containerElement.appendChild(card);
                });
            },
        };

        clApp.battery = {
            init() {
                // Check if the Battery Status API is supported
                if (!navigator.getBattery) {
                    console.warn("Battery Status API is not supported in this browser.");
                    return;
                }
                const batteryElements = document.querySelectorAll(".CL-BatteryMonitor");
                if (batteryElements.length === 0) return;
                navigator.getBattery().then(battery => {
                    battery.onchargingchange = () => this.update(battery);
                    battery.onlevelchange = () => this.update(battery);
                    battery.ondischargingtimechange = () => this.update(battery);
                    battery.onchargingtimechange = () => this.update(battery);
                    this.update(battery);
                });
            },
            update(battery){
                const batteryElements = document.querySelectorAll(".CL-BatteryMonitor");
                batteryElements.forEach(el => {
                    el.innerText = Math.round(battery.level * 7) < 7 ? ("battery_" + Math.round(battery.level * 7) + "_bar") : "battery_full";
                    el.classList[battery.charging ? "add" : "remove"]("charging");
                    el.classList[battery.level * 100 <= 10 && !battery.charging ? "add" : "remove"]("danger");
                    el.classList[battery.level * 100 <= 20 && !battery.charging ? "add" : "remove"]("warning");
                    el.title = Math.round(battery.level * 100) + "%, " + (battery.charging ? "charging, " : "") +
                        (battery.charging ? clApp.stringUtility.secondsToHourWithMinutes(battery.chargingTime) + " until full" : clApp.stringUtility.secondsToHourWithMinutes(battery.dischargingTime) + " left") + "." +
                        (
                            battery.level * 100 <= 10 && !battery.charging ? " Battery level is critically low. Please plug device to power." : 
                            (battery.level * 100 <= 20 && !battery.charging ? " Battery level is low. Please plug device to power." : "")
                        );
                });
            }
        };

        clApp.date = {
            format: 12,
            showSeconds: true,
            interval: null,
            init() {
                this.update();
                this.interval = setInterval(() => {
                    this.update();
                }, 100);
            },
            update() {
                const dateElements = document.querySelectorAll(".CL-DateMonitor");
                const now = new Date();
                let hours = now.getHours();
                let minutes = now.getMinutes();
                let seconds = now.getSeconds();
                let ampm = "";
                if (this.format === 12) {
                    ampm = hours >= 12 ? ' PM' : ' AM';
                    hours = hours % 12 || 12;
                }
                if (!this.showSeconds) seconds = "";
                else seconds = `:${seconds < 10 ? '0' + seconds : seconds}`;
                const timeString = `${hours}:${minutes < 10 ? '0' + minutes : minutes}${seconds}${ampm}`;
                const dateString = timeString + ` on ${["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"][now.getDay()]}, ` +
                    `${now.getDate()} ${["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"][now.getMonth()]} ${now.getFullYear()}`;
                dateElements.forEach(el => {
                    el.innerText = timeString;
                    el.title = dateString;
                });
            },
        };

        clApp.settings = {
            editor: null,
            schema: {
                title: "Settings",
                type: "object",
                properties: {
                    appearance: {
                        title: "Appearance",
                        type: "object",
                        properties: {
                            theme: {
                                title: "Theme",
                                type: "string",
                                default: "Default",
                                enum: clApp.config.themes.map(t => t.name)
                            },
                            borderRadius: {
                                title: "Border Radius",
                                type: "number",
                                default: 10,
                                minimum: 0,
                                maximum: 20
                            },
                        }
                    },
                    timeanddate: {
                        title: "Time and Date",
                        type: "object",
                        properties: {
                            format: {
                                title: "Time Format",
                                type: "number",
                                default: 12,
                                enum: [12, 24]
                            },
                            showSeconds: {
                                title: "Show Seconds",
                                type: "boolean",
                                format: "checkbox",
                                default: true
                            }
                        }
                    },
                }
            },
            default: {
                appearance: {
                    theme: "Default",
                    mode: "Light",
                    borderRadius: 10,
                },
                timeanddate: {
                    format: 12,
                    showSeconds: false,
                }
            },
            get() {
                return JSON.parse(localStorage.getItem("clAppSettings")) || this.default;
            },
            set(settings) {
                localStorage.setItem("clAppSettings", JSON.stringify(settings));
                this.update(settings);
            },
            createEditor() {
                clApp.elementUtility.removeAllChildren(document.getElementById("app.settings.page.allSettings"));
                this.editor = new JSONEditor(document.getElementById("app.settings.page.allSettings"), {
                    schema: this.schema,
                    theme: "barebones",
                    show_errors: "always",
                    disable_edit_json: true,
                    disable_properties: true,
                    disable_collapse: true,
                    no_additional_properties: true,
                    compact: true,
                    object_layout: "table",
                    startval: this.get(),
                });
                this.editor.on("change", () => {
                    const newSettings = this.editor.getValue();
                    localStorage.setItem("clAppSettings", JSON.stringify(newSettings));
                    this.update(newSettings);
                });
            },
            update(settings) {
                //this.editor.setValue(settings);
                const settingsStyles = document.getElementById("app.settingsStyles");
                settingsStyles.innerHTML = "";
                if (!clApp.config.themes.find(t => t.name === settings.appearance.theme)) {
                    console.warn(`Theme "${settings.appearance.theme}" not found. Using default theme.`);
                    settings.appearance.theme = "Default";
                }
                settingsStyles.innerHTML += `
                    :root {
                        --cl-border-radius: ${settings.appearance.borderRadius}px;
                    }
                    body {
                        ${clApp.config.themes.find(t => t.name === settings.appearance.theme).code}
                    }
                `;
                clApp.date.format = settings.timeanddate.format;
                clApp.date.showSeconds = settings.timeanddate.showSeconds;
            }
        };

        clApp.supabase = {
            key: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtwbXN6dHV4cmxydGJueHhyaHBqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDA3OTA1MzYsImV4cCI6MjA1NjM2NjUzNn0.wxYd_XO12CKjUeQZ1_MRPnD5o_S8KBK9XDKL0jh1I1I",
            url: "https://kpmsztuxrlrtbnxxrhpj.supabase.co",
            client: null,
            init() {
                if (this.client) {
                    console.warn("Supabase client is already initialized.");
                    return;
                }
                this.client = supabase.createClient(this.url, this.key);
                clApp.toast("info", "Supabase client initialized successfully.");
                this.getUserProfile().then(user => {
                    if (user) {
                        clApp.toast("person", "Now signed in as " + user.display_name);
                    } else {
                        clApp.toast("info", "Not signed in.");
                    }
                });
            },
            async getUser() {
                if (!this.client) {
                    console.error("Supabase client is not initialized.");
                    return null;
                }
                const { data, error } = await this.client.auth.getUser();
                if (error) {
                    clApp.toast("error", `Error getting user: ${error.message}`);
                    return null;
                }
                return data.user;
            },
            async signIn(email, password) {
                if (!this.client) {
                    console.error("Supabase client is not initialized.");
                    return null;
                }
                const { data, error } = await this.client.auth.signInWithPassword({ email: email, password: password });
                if (error) {
                    clApp.toast("error", `Error signing in: ${error.message}`);
                    return null;
                }
                clApp.toast("info", "Signed in successfully.");
                return data.user;
            },
            async signUp(email, password) {
                if (!this.client) {
                    console.error("Supabase client is not initialized.");
                    return null;
                }
                const res0 = await this.client.auth.signUp({ email: email, password: password });
                if (res0.error) {
                    clApp.toast("error", `Error signing up: ${error.message}`);
                    return null;
                }
                clApp.toast("info", "Signed up successfully.");
                const res1 = await this.client.from("users").insert({
                    email: email,
                    display_name: email,
                });
                if (res1.error) {
                    clApp.toast("error", `Error creating user profile: ${res1.error.message}`);
                    return null;
                }
                clApp.toast("info", "User profile created successfully.");
                return res0.data.user;
            },
            async signOut() {
                if (!this.client) {
                    console.error("Supabase client is not initialized.");
                    return null;
                }
                const { error } = await this.client.auth.signOut();
                if (error) {
                    clApp.toast("error", `Error signing out: ${error.message}`);
                    return null;
                }
                clApp.toast("info", "Signed out successfully.");
                return true;
            },
            async getUser() {
                if (!this.client) {
                    console.error("Supabase client is not initialized.");
                    return null;
                }
                const { data, error } = await this.client.auth.getUser();
                if (error) {
                    clApp.toast("error", `Error getting user: ${error.message}`);
                    return null;
                }
                return data.user;
            },
            async deleteUser() {
                // DANGEROUS FUNCTION! Please get user consent first!
                if (!this.client) {
                    console.error("Supabase client is not initialized.");
                    return;
                }
                const id = (await this.getUserProfile()).id;
                if (!id) {
                    clApp.toast("error", "User ID not found.");
                    return;
                }
                const { data, error } = await this.client.rpc("delete_user");
                if (error) {
                    clApp.toast("error", `Error deleting user: ${error.message}`);
                    return;
                }
                clApp.toast("info", "User deleted successfully.");
            },
            async getUserProfile(userId = null) {
                if (!this.client) {
                    console.error("Supabase client is not initialized.");
                    return null;
                }
                if (!userId) {
                    const user = await this.getUser();
                    if (!user) {
                        clApp.toast("error", "No user is signed in.");
                        return null;
                    }
                    userId = user.id;
                }
                const { data, error } = await this.client.from("users").select("*").eq("id", userId).single();
                if (error) {
                    clApp.toast("error", `Error getting user profile: ${error.message}`);
                    return null;
                }
                return data;
            },
            async getUserProfiles() {
                if (!this.client) {
                    console.error("Supabase client is not initialized.");
                    return [];
                }
                const { data, error } = await this.client.from("users").select("*").order("display_name");
                if (error) {
                    clApp.toast("error", `Error getting user profiles: ${error.message}`);
                    return [];
                }
                return data;
            },
            async updateUserProfile(userId = null, profileData) {
                if (!this.client) {
                    console.error("Supabase client is not initialized.");
                    return null;
                }
                if (!userId) {
                    const user = await this.getUser();
                    if (!user) {
                        clApp.toast("error", "No user is signed in.");
                        return null;
                    }
                    userId = user.id;
                }
                const { data, error } = await this.client.from("users").update(profileData).eq("id", userId);
                if (error) {
                    clApp.toast("error", `Error updating user profile: ${error.message}`);
                    return null;
                }
                clApp.toast("info", "User profile updated successfully.");
                return data;
            },
            async updateUserBanner(file) {
                if (!this.client) {
                    console.error("Supabase client is not initialized.");
                    return;
                }
                const user = (await this.getUserProfile()).id;
                const { data, error } = await this.client.storage.from("clmain").upload(`cms_uploads/banner_${userId}_${Date.now()}`, file);
                if (error) {
                    clApp.toast("error", `Error uploading banner: ${error.message}`);
                    return;
                }
                await this.updateUserProfile(null, { banner_url: this.client.storage.from("clmain").getPublicUrl(data.path).data.publicUrl });
                return this.client.storage.from("clmain").getPublicUrl(data.path);
            },
            async updateUserPhoto(file) {
                if (!this.client) {
                    console.error("Supabase client is not initialized.");
                    return;
                }
                const userId = (await this.getUserProfile()).id;
                const { data, error } = await this.client.storage.from("clmain").upload(`cms_uploads/photo_${userId}_${Date.now()}`, file);
                if (error) {
                    clApp.toast("error", `Error uploading photo: ${error.message}`);
                    return;
                }
                await this.updateUserProfile(null, { photo_url: this.client.storage.from("clmain").getPublicUrl(data.path).data.publicUrl });
                return this.client.storage.from("clmain").getPublicUrl(data.path);
            },
            async uploadFile(file) {
                if (!this.client) {
                    console.error("Supabase client is not initialized.");
                    return;
                }
                const { data, error } = await this.client.storage.from("clmain").upload(`cms_uploads/${Date.now()}${file.name}`, file);
                if (error) {
                    clApp.toast("error", `Error uploading file: ${error.message}`);
                    return;
                }
                return this.client.storage.from("clmain").getPublicUrl(data.path);
            },
            async getGames() {
                if (!this.client) {
                    console.error("Supabase client is not initialized.");
                    return null;
                }
                const { data, error } = await this.client.from("games").select();
                if (error) {
                    clApp.toast("error", `Error getting games: ${error.message}`);
                    return null;
                }
                return data;
            },
            async getGame(gid) {
                if (!this.client) {
                    console.error("Supabase client is not initialized.");
                    return null;
                }
                const { data, error } = await this.client.from("games").select().eq("id", gid).single();
                if (error) {
                    clApp.toast("error", `Error getting game: ${error.message}`);
                    return null;
                }
                return data;
            },
            async getChatMessages() {
                if (!this.client) {
                    console.error("Supabase client is not initialized.");
                    return [];
                }
                const { data, error } = await this.client.from("main_chat").select();
                if (error) {
                    clApp.toast("error", `Error getting chat messages: ${error.message}`);
                    return [];
                }
                return data;
            },
            async sendChatMessage(message, isAnnouncement) {
                if (!this.client) {
                    console.error("Supabase client is not initialized.");
                    return;
                }
                const user = await this.getUserProfile();
                if (!user) {
                    clApp.toast("error", "No user is signed in.");
                    return;
                } else if (user && isAnnouncement && !user.is_admin) {
                    clApp.toast("error", "You do not have permission to send announcements.");
                    return;
                }
                const { data, error } = await this.client.from("main_chat").insert({
                    username: isAnnouncement ? "" : user.display_name,
                    content: message,
                    is_announcement: isAnnouncement,
                });
                if (error) {
                    clApp.toast("error", `Error sending chat message: ${error.message}`);
                    return;
                }
            },
            subscribe() {
                if (!this.client) {
                    console.error("Supabase client is not initialized.");
                    return;
                }
                this.client.channel("main")
                    .on("postgres_changes", { event: "INSERT", schema: "public", table: "main_chat" }, (payload) => {
                        if (payload.new.is_announcement) {
                            clApp.toast("campaign", payload.new.content);
                        }
                        clApp.chat.addUserMessage(payload.new.username, payload.new.content, payload.new.is_announcement);
                    })
                    .on("postgres_changes", { event: "INSERT", schema: "public", table: "videos"}, (payload) => {
                        clApp.toast("video_library", payload.new.title);
                    })
                    .subscribe();
            },
            async getVideos() {
                if (!this.client) {
                    console.error("Supabase client is not initialized.");
                    return [];
                }
                const { data, error } = await this.client.from("videos").select("*, creator(*)");
                if (error) {
                    clApp.toast("error", `Error getting videos: ${error.message}`);
                    return [];
                }
                return data;
            },
            async getVideosByUser(userUid = null) {
                if (!this.client) {
                    console.error("Supabase client is not initialized.");
                    return [];
                }
                if (!userUid) {
                    userUid = (await this.getUserProfile()).id;
                }
                const { data, error } = await this.client.from("videos").select("*, creator(*)").eq("creator", userUid);
                if (error) {
                    clApp.toast("error", `Error getting videos: ${error.message}`);
                    return [];
                }
                return data;
            },
            async getVideo(videoId) {
                if (!this.client) {
                    console.error("Supabase client is not initialized.");
                    return null;
                }
                const { data, error } = await this.client.from("videos").select(`
                    *(*)
                `).eq("id", videoId);
                if (error) {
                    clApp.toast("error", `Error getting video data: ${error.message}`);
                    return null;
                }
                return data;
            },
            async getCommentsByVideo(videoId) {
                if (!this.client) {
                    console.error("Supabase client is not initialized.");
                    return [];
                }
                const { data, error } = await this.client.from("video_comments").select(`
                    *, author(*)
                `).eq("video", videoId);
                if (error) {
                    clApp.toast("error", `Error getting comments: ${error.message}`);
                    return [];
                }
                return data;
            },
            async getCommentById(commentId) {
                if (!this.client) {
                    console.error("Supabase client is not initialized.");
                    return null;
                }
                const { data, error } = await this.client.from("video_comments").select(`
                    *, author(*)
                `).eq("id", commentId).single();
                if (error) {
                    clApp.toast("error", `Error getting comment: ${error.message}`);   
                    return null;
                }
                return data;
            },
            async getRepliesByComment(commentId) {
                if (!this.client) {
                    console.error("Supabase client is not initialized.");
                    return [];
                }
                const { data, error } = await this.client.from("video_comments").select(`
                    *, author(*)
                `).eq("parent", commentId);
                if (error) {
                    clApp.toast("error", `Error getting comments: ${error.message}`);
                    return [];
                }
                return data;
            },
            async addCommentToVideo(videoId, content, parent = null) {
                if (!this.client) {
                    console.error("Supabase client is not initialized.");
                    return;
                }
                const { data, error } = await this.client.from("video_comments").insert({
                    video: videoId,
                    content: content,
                    parent: parent,
                });
                if (error) {
                    clApp.toast("error", `Error adding comment: ${error.message}`);
                } else {
                    clApp.toast("success", "Comment added successfully!");
                }
            },
            async editComment(commentId, newContent) {
                if (!this.client) {
                    console.error("Supabase client is not initialized.");
                    return;
                }
                const { data, error } = await this.client.from("video_comments").update({
                    content: newContent,
                }).eq("id", commentId);
                if (error) {
                    clApp.toast("error", `Error editing comment: ${error.message}`);
                } else {
                    clApp.toast("success", "Comment edited successfully!");
                }
            },
            async deleteComment(commentId) {
                if (!this.client) {
                    console.error("Supabase client is not initialized.");
                    return;
                }
                const res = await this.client.from("video_comments").delete().eq('id', commentId);
            },
            async deleteVideo(videoId) {
                if (!this.client) {
                    console.error("Supabase client is not initialized.");
                    return;
                }
                const res = await this.client.from("videos").delete().eq('id', videoId);
            },
            async createVideo(data) {
                if (!this.client) {
                    console.error("Supabase client is not initialized.");
                    return;
                }
                const { data, error } = await this.client.from("videos").insert(data);
                if (error) {
                    clApp.toast("error", `Error creating video: ${error.message}`);
                } else {
                    clApp.toast("success", "Video created successfully!");
                }
            },
        };

        clApp.games = {
            newReleasesCardsContainer: "app.gamesScreen.newReleases.boxedContent.cardsContainer",
            searchInput: "app.gamesScreen.page.searchGames.boxedContent.searchInput",
            searchSortSelect: "app.gamesScreen.page.searchGames.boxedContent.sortBySelect",
            searchResultsContainer: "app.gamesScreen.page.searchGames.boxedContent.gamesContainer",
            savedGamesContainer: "app.gamesScreen.page.savedGames.boxedContent.gamesContainer",
            historyContainer: "app.gamesScreen.page.history.boxedContent.gamesContainer",
            gameImage: "app.gameScreen.page.gameImage",
            gameTitle: "app.gameScreen.page.gameTitle",
            gameActionBox: "app.gameScreen.page.gameActionBox",
            gameNotesContainer: "app.gameScreen.page.gameNotesContainer",
            gameDescription: "app.gameScreen.page.gameDescription",
            gameFrameContainer: "app.gamePlayer.page",
            gameFrame: "app.gamePlayer.page.iframe",
            currentGameCardContainer: "app.gamesScreen.page.currentlyPlaying.boxedContent.game",
            currentGameActionBtnsContainer: "app.gamesScreen.page.currentlyPlaying.boxedContent.actionBtnsContainer",
            currentGid: null,
            init() {
                // Sort clApp.config.content.games by date, and get only the items that have a date within the last month.
                const newReleases = clApp.config.content.games.filter(game => clApp.dateUtility.isWithinPastMonth(new Date(game.date)));
                newReleases.sort((a, b) => new Date(b.date) - new Date(a.date));
                const newReleasesContainer = document.getElementById(this.newReleasesCardsContainer);
                clApp.elementUtility.removeAllChildren(newReleasesContainer);
                newReleases.forEach(game => {
                    const card = document.createElement("div");
                    card.classList.add("cl-game");
                    card.innerHTML = `
                        <div class="cl-game-info">
                            <h1>${game.title}</h1>
                            <p>${clApp.stringUtility.truncate(game.description, 200)}</p>
                        </div>
                    `;
                    card.onclick = () => this.open(game.id);
                    card.style.backgroundImage = `url(${game.photo || "/assets/background/game_placeholder.png"})`;
                    newReleasesContainer.appendChild(card);
                });

                const searchInput = document.getElementById(this.searchInput);
                const searchSortSelect = document.getElementById(this.searchSortSelect);
                searchInput.oninput = () => {
                    const query = searchInput.value.toLowerCase();
                    const sortBy = searchSortSelect.value;
                    this.search(query, sortBy);
                };
                searchSortSelect.onchange = () => {
                    const query = searchInput.value.toLowerCase();
                    const sortBy = searchSortSelect.value;
                    this.search(query, sortBy);
                };
                // Initial search with empty query
                clApp.games.search("", searchSortSelect.value);
                // Load saved games
                this.fetchSavedGames();
                this.history.fetch();
            },
            search(query, sortBy) {
                // sortBy can be "a-to-z", "z-to-a", "newest", "oldest"
                const searchResultsContainer = document.getElementById(this.searchResultsContainer);
                clApp.elementUtility.removeAllChildren(searchResultsContainer);
                const games = clApp.config.content.games.filter(game => game.title.toLowerCase().includes(query)); 
                if (sortBy === "a-to-z") {
                    games.sort((a, b) => a.title.localeCompare(b.title));
                } else if (sortBy === "z-to-a") {
                    games.sort((a, b) => b.title.localeCompare(a.title));
                } else if (sortBy === "newest") {
                    games.sort((a, b) => new Date(b.date) - new Date(a.date));
                } else if (sortBy === "oldest") {
                    games.sort((a, b) => new Date(a.date) - new Date(b.date));
                }
                if (games.length === 0) {
                    searchResultsContainer.innerHTML = "<p>No games found.</p>";
                    return;
                }
                games.forEach(game => {
                    const card = document.createElement("div");
                    card.classList.add("cl-game");
                    card.innerHTML = `
                        <div class="cl-game-info">
                            <h1>${game.title}</h1>
                            <p>${clApp.stringUtility.truncate(game.description, 200)}</p>
                        </div>
                    `;
                    card.onclick = () => this.open(game.id);
                    card.style.backgroundImage = `url(${game.photo || "/assets/background/game_placeholder.png"})`;
                    searchResultsContainer.appendChild(card);
                });
            },
            open(gid) {
                const game = clApp.config.content.games.find(g => g.id === gid);
                if (!game) {
                    clApp.toast("error", "Game not found.");
                    return;
                }
                clApp.pages.open("Game");
                const gameImage = document.getElementById(this.gameImage);
                const gameTitle = document.getElementById(this.gameTitle);
                const gameActionBox = document.getElementById(this.gameActionBox);
                const gameNotesContainer = document.getElementById(this.gameNotesContainer);
                const gameDescription = document.getElementById(this.gameDescription);
                
                gameImage.src = game.photo || "/assets/background/game_placeholder.png";
                gameTitle.innerHTML = game.title;
                
                const playBtn = document.createElement("button");
                playBtn.innerHTML = '<i class="material-symbols-outlined">play_arrow</i>';
                playBtn.onclick = () => this.play(gid);
                if (this.currentGid) playBtn.disabled = true;
                playBtn.classList.add("cl-button");
                const downloadBtn = document.createElement("button");
                downloadBtn.innerHTML = '<i class="material-symbols-outlined">download</i>';
                downloadBtn.onclick = () => window.open(game.download, "_blank");
                downloadBtn.classList.add("cl-button");
                const shareBtn = document.createElement("button");
                shareBtn.innerHTML = '<i class="material-symbols-outlined">share</i>';
                shareBtn.onclick = () => clApp.stringUtility.copyToClipboard(location.hostname + "/?mode=game&id=" + game.id)
                shareBtn.classList.add("cl-button");
                const saveBtn = document.createElement("button");
                saveBtn.innerHTML = '<i class="material-symbols-outlined">bookmark_'+(this.isSaved(game.id)?"remove":"add")+'</i>';
                saveBtn.onclick = () => {
                    this[this.isSaved(game.id)?"unsave":"save"](game.id);
                    saveBtn.innerHTML = '<i class="material-symbols-outlined">bookmark_'+(this.isSaved(game.id)?"remove":"add")+'</i>';
                };
                saveBtn.classList.add("cl-button");
                const backBtn = document.createElement("button");
                backBtn.innerHTML = '<i class="material-symbols-outlined">arrow_back</i>';
                backBtn.onclick = () => clApp.pages.open("Games");
                backBtn.classList.add("cl-button");

                clApp.elementUtility.removeAllChildren(gameActionBox);
                gameActionBox.appendChild(playBtn);
                if (game.download) gameActionBox.appendChild(downloadBtn);
                gameActionBox.appendChild(saveBtn);
                gameActionBox.appendChild(shareBtn);
                gameActionBox.appendChild(backBtn);

                gameNotesContainer.innerHTML = (game.notes || []).map(n => {
                    return `
                        <button class="cl-button is-info" interactive="false">
                            <span class="material-symbols-outlined">info</span>
                            <span>${n}</span>
                        </button>`;
                }).join('');

                gameDescription.innerHTML = game.description;
            },
            save(gid) {
                const savedGames = JSON.parse(localStorage.getItem("clAppSavedGames")) || [];
                if (!savedGames.includes(gid)) savedGames.push(gid);
                localStorage.setItem("clAppSavedGames", JSON.stringify(savedGames));
                this.fetchSavedGames();
            },
            unsave(gid) {
                const savedGames = JSON.parse(localStorage.getItem("clAppSavedGames")) || [];
                const idx = savedGames.indexOf(gid);
                if (idx > -1) {
                    savedGames.splice(idx, 1)
                    localStorage.setItem("clAppSavedGames", JSON.stringify(savedGames));
                }
                this.fetchSavedGames();
            },
            isSaved(gid) {
                return (JSON.parse(localStorage.getItem("clAppSavedGames")) || []).includes(gid);
            },
            fetchSavedGames() {
                const savedGamesContainer = document.getElementById(this.savedGamesContainer);
                clApp.elementUtility.removeAllChildren(savedGamesContainer);
                const savedGames = clApp.config.content.games.filter(g => (JSON.parse(localStorage.getItem("clAppSavedGames")) || []).includes(g.id));
                savedGames.forEach(game => {
                    const card = document.createElement("div");
                    card.classList.add("cl-game");
                    card.innerHTML = `
                        <div class="cl-game-info">
                            <h1>${game.title}</h1>
                            <p>${clApp.stringUtility.truncate(game.description, 200)}</p>
                        </div>
                    `;
                    card.onclick = () => this.open(game.id);
                    card.style.backgroundImage = `url(${game.photo || "/assets/background/game_placeholder.png"})`;
                    savedGamesContainer.appendChild(card);
                });
                if (savedGames.length == 0) savedGamesContainer.innerHTML = "<p>You have not saved any games.</p>";
            },
            play(gid) {
                const game = clApp.config.content.games.find(g => g.id === gid);
                if (!game) {
                    clApp.toast("error", "Game not found.");
                    return;
                }
                this.currentGid = gid;
                clApp.pages.resetAll();
                clApp.pages.show("Games", "Currently Playing");
                const gameFrameContainer = document.getElementById(this.gameFrameContainer);
                const gameFrame = document.getElementById(this.gameFrame);
                const currentGameCardContainer = document.getElementById(this.currentGameCardContainer);
                const currentGameActionBtnsContainer = document.getElementById(this.currentGameActionBtnsContainer);
                gameFrameContainer.classList.remove("hidden");
                gameFrame.src = game.link;
                gameFrame.focus();
                clApp.elementUtility.enterFullscreen(document.body);
                gameFrame.onload = () => {
                    this.history.add(gid);
                };
                document.onfullscreenchange = () => {
                    if (document.fullscreenElement) {
                        clApp.pages.resetAll();
                    } else {
                        clApp.pages.open("Games", "Currently Playing");
                    }
                };
                currentGameCardContainer.innerHTML = `
                    <div class="cl-game-info">
                        <h1>${game.title}</h1>
                        <p>${clApp.stringUtility.truncate(game.description, 200)}</p>
                    </div>
                `;
                currentGameCardContainer.style.backgroundImage = game.photo || "/assets/background/game_placeholder.png";
                const resumeBtn = document.createElement("div");
                resumeBtn.classList.add("cl-card");
                resumeBtn.onclick = () => {
                    clApp.elementUtility.enterFullscreen(document.body);
                    clApp.pages.resetAll();
                };
                resumeBtn.innerHTML = `
                    <div class="cl-card-top">
                        <i class="material-symbols-outlined">play_arrow</i>
                        <span>Resume</span>
                    </div>
                    <div class="cl-card-bottom">
                        Resume the game.
                    </div>
                `;
                const restartBtn = document.createElement("div");
                restartBtn.classList.add("cl-card");
                restartBtn.onclick = () => {
                    gameFrame.contentWindow.location.reload();
                }
                restartBtn.innerHTML = `
                    <div class="cl-card-top">
                        <i class="material-symbols-outlined">refresh</i>
                        <span>Refresh</span>
                    </div>
                    <div class="cl-card-bottom">
                        Restart the game.
                    </div>
                `;
                const exitBtn = document.createElement("div");
                exitBtn.classList.add("cl-card");
                exitBtn.onclick = () => {
                    clApp.dialog.confirm("Are you sure you want to close \"" + game.title + "\"?").then(answer => {
                        if (answer) {
                            clApp.pages.resetAll();
                            clApp.elementUtility.exitFullscreen();
                            document.onfullscreenchange = () => {};
                            gameFrame.src = "/games/game_loader.html";
                            gameFrameContainer.classList.add("hidden");
                            this.currentGid = null;
                            clApp.pages.open("Games");
                            clApp.pages.hide("Games", "Currently Playing")
                        }
                    });
                }
                exitBtn.innerHTML = `
                    <div class="cl-card-top">
                        <i class="material-symbols-outlined">close</i>
                        <span>Exit</span>
                    </div>
                    <div class="cl-card-bottom">
                        Close the game.
                    </div>
                `;
                clApp.elementUtility.removeAllChildren(currentGameActionBtnsContainer);
                currentGameActionBtnsContainer.appendChild(resumeBtn);
                currentGameActionBtnsContainer.appendChild(restartBtn);
                currentGameActionBtnsContainer.appendChild(exitBtn);
            },
            history: {
                historyContainer: "app.gamesScreen.page.history.boxedContent.gamesContainer",
                fetch() {
                    const historyContainer = document.getElementById(this.historyContainer);
                    clApp.elementUtility.removeAllChildren(historyContainer);
                    var historyItems = JSON.parse(localStorage.getItem("clAppGameHistory")) || [];
                    historyItems = historyItems.sort((a, b) => new Date(b.date) - new Date(a.date));
                    historyItems.forEach(item => {
                        const game = clApp.config.content.games.find(g => g.id == item.gid);
                        const card = document.createElement("div");
                        card.classList.add("cl-game");
                        card.innerHTML = `
                            <div class="cl-game-info">
                                <h1>${game.title}</h1>
                                <p>${new Intl.DateTimeFormat("en-US", { timeStyle: "short", dateStyle: "short" }).format(new Date(item.date))}</p>
                            </div>
                        `;
                        card.onclick = () => clApp.games.open(game.id);
                        card.style.backgroundImage = `url(${game.photo || "/assets/background/game_placeholder.png"})`;
                        historyContainer.appendChild(card);
                    });
                    if (historyItems.length == 0) historyContainer.innerHTML = "<p>You have not played any games.</p>";
                },
                add(gid) {
                    const historyItems = JSON.parse(localStorage.getItem("clAppGameHistory")) || [];
                    historyItems.push({gid: gid, date: new Date().toISOString()});
                    localStorage.setItem("clAppGameHistory", JSON.stringify(historyItems));
                    this.fetch();
                },
            },
        };

        clApp.minecraft = {
            versionsContainer: "app.minecraftScreen.page.versions.boxedContent.versionsContainer",
            modsContainer: "app.minecraftScreen.page.mods.boxedContent.modsContainer",
            worldsContainer: "app.minecraftScreen.page.worlds.boxedContent.worldsContainer",
            resourcePacksContainer: "app.minecraftScreen.page.resourcePacks.boxedContent.resourcePacksContainer",
            fetch() {
                const versionsContainer = document.getElementById(this.versionsContainer);
                const modsContainer = document.getElementById(this.modsContainer);
                const worldsContainer = document.getElementById(this.worldsContainer);
                const resourcePacksContainer = document.getElementById(this.resourcePacksContainer);

                versionsContainer.innerHTML = clApp.config.content.minecraft.versions.map(version => {
                    return `
                        <div class="cl-collapsible cl-container">
                            <input type="checkbox" class="cl-collapsible-checkbox">
                            <div class="cl-horizontal cl-collapsible-top">
                                <span class="material-symbols-outlined cl-collapsible-arrow">arrow_right</span>
                                <h3>${version.title}</h3>
                            </div>
                            <div class="cl-container cl-collapsible-content">
                                ${version.vers.map(ver => {
                                    return `
                                        <div class="cl-horizontal">
                                            <h3>${ver.name}</h3>
                                            <a class="cl-button" href="${ver.link}">
                                                <span class="material-symbols-outlined">play_arrow</span>
                                            </a>
                                        </div>
                                    `;
                                }).join("")}
                            </div>
                        </div>
                    `;
                }).join("");
                modsContainer.innerHTML = clApp.config.content.minecraft.mods.map(mod => {
                    return `
                        <tr>
                            <td>${mod.name}</td>
                            <td>${mod.description || ""}</td>
                            <td>
                                <div class="cl-horizontal">
                                    <a class="cl-button" href="${mod.link}">
                                        <i class="material-symbols-outlined">download</i>
                                    </a>
                                </div>
                            </td>
                        </tr>
                    `;
                }).join("");
                worldsContainer.innerHTML = clApp.config.content.minecraft.maps.map(map => {
                    return `
                        <tr>
                            <td>${map.name}</td>
                            <td>${map.description || ""}</td>
                            <td>
                                <div class="cl-horizontal">
                                    <a class="cl-button" href="${map.link}">
                                        <i class="material-symbols-outlined">download</i>
                                    </a>
                                </div>
                            </td>
                        </tr>
                    `;
                }).join("");
                resourcePacksContainer.innerHTML = clApp.config.content.minecraft.resourcePacks.map(resourcePack => {
                    return `
                        <tr>
                            <td>${resourcePack.name}</td>
                            <td>${resourcePack.size}</td>
                            <td>
                                <div class="cl-horizontal">
                                    <a class="cl-button" href="${resourcePack.link}">
                                        <i class="material-symbols-outlined">download</i>
                                    </a>
                                </div>
                            </td>
                        </tr>
                    `;
                }).join("");
            }
        }

        clApp.auth = {
            emailInput: "app.authScreen.page.emailInput",
            passwordInput: "app.authScreen.page.passwordInput",
            confirmPasswordInput: "app.authScreen.page.confirmPasswordInput",
            SIBtn: "app.authScreen.page.SIBtn",
            SUBtn: "app.authScreen.page.SUBtn",
            continueAsGuestBtn: "app.authScreen.page.continueAsGuestBtn",
            init() {
                const emailInput = document.getElementById(this.emailInput);
                const passwordInput = document.getElementById(this.passwordInput);
                const confirmPasswordInput = document.getElementById(this.confirmPasswordInput);
                const SIBtn = document.getElementById(this.SIBtn);
                const SUBtn = document.getElementById(this.SUBtn);
                const continueAsGuestBtn = document.getElementById(this.continueAsGuestBtn);

                SIBtn.onclick = () => {
                    SIBtn.classList.add("is-loading");
                    clApp.supabase.signIn(emailInput.value, passwordInput.value).then(user => {
                        SIBtn.classList.remove("is-loading");
                        // The sign in was successful!
                        emailInput.value = "";
                        passwordInput.value = "";
                        confirmPasswordInput.value = "";
                        clApp.toast("person", "Now logged in as " + user.email);
                        clApp.pages.open("Home");
                        clApp.account.init();
                    });
                }
                SUBtn.onclick = () => {
                    if (confirmPasswordInput.value != passwordInput.value) {
                        clApp.toast("error", "Passwords do not match");
                        return;
                    }
                    SUBtn.classList.add("is-loading");
                    clApp.supabase.signUp(emailInput.value, passwordInput.value).then(user => {
                        SUBtn.classList.remove("is-loading");
                        // The sign up was successful!
                        emailInput.value = "";
                        passwordInput.value = "";
                        confirmPasswordInput.value = "";
                        clApp.toast("person", "Now logged in as " + user.email);
                        clApp.pages.open("Home");
                        clApp.account.init();
                    });
                }
                continueAsGuestBtn.onclick = () => {
                    clApp.pages.open("Home");
                }
            },
        }

        clApp.chat = {
            userMessagesContainer: "app.chat.page.withUsers.boxedContent.messagesContainer",
            userMessageInput: "app.chat.page.withUsers.boxedContent.msgInput",
            userMessageSendBtn: "app.chat.page.withUsers.boxedContent.sendBtn",
            userMessageAnnounceBtn: "app.chat.page.withUsers.boxedContent.announceBtn",
            aiMessagesContainer: "app.chat.page.ai.boxedContent.messagesContainer",
            aiMessageInput: "app.chat.page.ai.boxedContent.msgInput",
            aiMessageSendBtn: "app.chat.page.ai.boxedContent.sendBtn",
            aiMessages: [],
            init() {
                const userMessagesContainer = document.getElementById(this.userMessagesContainer);
                const userMessageInput = document.getElementById(this.userMessageInput);
                const userMessageSendBtn = document.getElementById(this.userMessageSendBtn);
                const userMessageAnnounceBtn = document.getElementById(this.userMessageAnnounceBtn);
                const aiMessagesContainer = document.getElementById(this.aiMessagesContainer);
                const aiMessageInput = document.getElementById(this.aiMessageInput);
                const aiMessageSendBtn = document.getElementById(this.aiMessageSendBtn);

                clApp.elementUtility.removeAllChildren(userMessagesContainer);
                clApp.elementUtility.removeAllChildren(aiMessagesContainer);
                userMessageSendBtn.onclick = () => {
                    userMessageSendBtn.disabled = true;
                    userMessageAnnounceBtn.disabled = true;
                    if (userMessageInput.value.trim() === "") {
                        clApp.toast("error", "Please enter a message");
                        return;
                    }
                    clApp.supabase.sendChatMessage(userMessageInput.value.trim(), false).then(() => {
                        userMessageInput.value = "";
                        userMessageSendBtn.disabled = false;
                        userMessageAnnounceBtn.disabled = false;
                    });
                }
                userMessageAnnounceBtn.onclick = () => {
                    userMessageSendBtn.disabled = true;
                    userMessageAnnounceBtn.disabled = true;
                    if (userMessageInput.value.trim() === "") {
                        clApp.toast("error", "Please enter a message");
                        return;
                    }
                    clApp.supabase.sendChatMessage(userMessageInput.value.trim(), true).then(() => {
                        userMessageInput.value = "";
                        userMessageSendBtn.disabled = false;
                        userMessageAnnounceBtn.disabled = false;
                    });
                }
                userMessageInput.onkeydown = (e) => {
                    if (e.key === "Enter" && !e.shiftKey) userMessageSendBtn.click();
                    else if (e.key === "Enter" && e.shiftKey) userMessageAnnounceBtn.click();
                }
                userMessageInput.onclick = () => userMessagesContainer.scrollTop = userMessagesContainer.scrollHeight;
                aiMessageSendBtn.onclick = () => {
                    const message = aiMessageInput.value.trim();
                    if (message) {
                        aiMessageSendBtn.disabled = true;
                        this.addAIMessage(message, true);
                        aiMessageInput.value = "";
                        this.aiMessages.push({
                            content: message,
                            role: "user",
                        });
                        puter.ai.chat(this.aiMessages).then(res => {
                            this.addAIMessage(res, false);
                            this.aiMessages.push(res.message);
                            aiMessageSendBtn.disabled = false;
                        }).catch(err => {
                            clApp.toast("error", "AI response error: " + err);
                            aiMessageSendBtn.disabled = false;
                        });
                    }
                }
                aiMessageInput.onkeydown = (e) => {
                    if (e.key === "Enter") aiMessageSendBtn.click();
                }
                aiMessageInput.onclick = () => aiMessagesContainer.scrollTop = aiMessagesContainer.scrollHeight;
            
                clApp.supabase.getChatMessages().then(res => {
                    res.forEach(msg => {
                        this.addUserMessage(msg.username, msg.content, msg.is_announcement);
                    });
                    userMessageSendBtn.disabled = false;
                    userMessageAnnounceBtn.disabled = false;
                });
            },
            addUserMessage(username, message, isAnnouncement) {
                const userMessagesContainer = document.getElementById(this.userMessagesContainer);
                userMessagesContainer.innerHTML += `
                    <div>
                        <a href="#">${username}</a>
                        <p${isAnnouncement ? ` class="warning"` : ""}>${message}</p>
                    </div>
                `;
                userMessagesContainer.scrollTop = userMessagesContainer.scrollHeight;
            },
            addAIMessage(message, isUser) {
                const aiMessagesContainer = document.getElementById(this.aiMessagesContainer);
                aiMessagesContainer.innerHTML += `
                    <div>
                        <a href="#">${isUser ? `User` : `AI`}</a>
                        <p>${message}</p>
                    </div>
                `;
                aiMessagesContainer.scrollTop = aiMessagesContainer.scrollHeight;
            },
        }

        clApp.videos = {
            searchInput: "app.videos.page.allVideos.searchInput",
            searchSortSelect: "app.videos.page.allVideos.sortSelect",
            searchResultsContainer: "app.videos.page.allVideos.list",
            videoPlayerPage: "app.videoPlayer.page",
            videoPlayer: "app.videoPlayer.page.video",
            videoTitle: "app.video.page.info.title",
            videoStatus: "app.video.page.info.status",
            videoCloseBtn: "app.video.page.info.closeBtn",
            videoResumeBtn: "app.video.page.info.resumeBtn",
            videoDescription: "app.video.page.info.description",
            videoCommentInput: "app.video.page.comments.commentInput",
            videoCommentSubmitBtn: "app.video.page.comments.sendBtn",
            videoCommentsAmountText: "app.video.page.comments.amountText",
            videoCommentsContainer: "app.video.page.comments.commentsContainer",
            videos: [],
            currentVideo: null,
            init() {
                clApp.supabase.getVideos().then(res => {
                    this.videos = res;
                    const searchInput = document.getElementById(clApp.videos.searchInput);
                    const searchSortSelect = document.getElementById(clApp.videos.searchSortSelect);
                    const searchResultsContainer = document.getElementById(clApp.videos.searchResultsContainer);
                    searchInput.oninput = () => {
                        const query = searchInput.value.toLowerCase();
                        const sortBy = searchSortSelect.value;
                        this.search(query, sortBy);
                    }
                    searchSortSelect.onchange = () => {
                        const query = searchInput.value.toLowerCase();
                        const sortBy = searchSortSelect.value;
                        this.search(query, sortBy);
                    }
                    this.search("", "newest");
                    this.history.fetch();
                });
            },
            search(query, sortBy) {
                // sortBy can be "newest", "oldest", "a-to-z" or "z-to-a"
                const searchInput = document.getElementById(clApp.videos.searchInput);
                const searchSortSelect = document.getElementById(clApp.videos.searchSortSelect);
                const searchResultsContainer = document.getElementById(clApp.videos.searchResultsContainer);
                const videos = this.videos.filter(v => v.title.toLowerCase().includes(query));
                if (sortBy === "newest") {
                    videos.sort((a, b) => b.created_at - a.created_at);
                } else if (sortBy === "oldest") {
                    videos.sort((a, b) => a.created_at - b.created_at);
                } else if (sortBy === "a-to-z") {
                    videos.sort((a, b) => a.title.localeCompare(b.title));
                } else if (sortBy === "z-to-a") {
                    videos.sort((a, b) => b.title.localeCompare(a.title));
                }
                if (videos.length === 0) {
                    searchResultsContainer.innerHTML = `<p>No videos found.</p>`;
                    return;
                }
                searchResultsContainer.innerHTML = "";
                videos.forEach(video => {
                    const videoElement = document.createElement("div");
                    videoElement.classList.add("cl-video");
                    videoElement.innerHTML = `
                        <img src="${video.thumbnail || "https://placehold.co/1600x900?text=No+Image"}" alt="${video.title}" class="cl-video-thumbnail">
                        <h3>${video.title}</h3>
                        <h4>${video.creator.display_name} | ${new Intl.DateTimeFormat("en-US", { timeStyle: "short", dateStyle: "short" }).format(new Date(video.created_at))}</h4>
                    `;
                    videoElement.onclick = () => this.play(video.id);
                    searchResultsContainer.appendChild(videoElement);
                })
            },
            play(id) {
                const video = this.videos.find(v => v.id === id);
                if (!video) {
                    clApp.toast("error", "Video not found.");
                    clApp.pages.open("Videos");
                    return;
                }
                this.currentVideo = id;
                clApp.pages.resetAll();
                const videoPlayerPage = document.getElementById(this.videoPlayerPage);
                const videoPlayer = document.getElementById(this.videoPlayer);
                videoPlayerPage.classList.remove("hidden");
                videoPlayer.src = video.video;
                const player = new Plyr(videoPlayer, {
                    title: video.title,
                    controls: `
                        <h1>${video.title}</h1>
                        <button class="cl-button" onclick="clApp.pages.open('Videos', 'Currently Playing');">
                            <span class="material-symbols-outlined">menu</span>
                        </button>
                        <div class="plyr__controls">
                            <button type="button" class="plyr__control" data-plyr="restart">
                                <svg role="presentation"><use xlink:href="#plyr-restart"></use></svg>
                                <span class="plyr__tooltip" role="tooltip">Restart</span>
                            </button>
                            <button type="button" class="plyr__control" data-plyr="rewind">
                                <svg role="presentation"><use xlink:href="#plyr-rewind"></use></svg>
                                <span class="plyr__tooltip" role="tooltip">Rewind {seektime} secs</span>
                            </button>
                            <button type="button" class="plyr__control" aria-label="Play, {title}" data-plyr="play">
                                <svg class="icon--pressed" role="presentation"><use xlink:href="#plyr-pause"></use></svg>
                                <svg class="icon--not-pressed" role="presentation"><use xlink:href="#plyr-play"></use></svg>
                                <span class="label--pressed plyr__tooltip" role="tooltip">Pause</span>
                                <span class="label--not-pressed plyr__tooltip" role="tooltip">Play</span>
                            </button>
                            <button type="button" class="plyr__control" data-plyr="fast-forward">
                                <svg role="presentation"><use xlink:href="#plyr-fast-forward"></use></svg>
                                <span class="plyr__tooltip" role="tooltip">Forward {seektime} secs</span>
                            </button>
                            <div class="plyr__progress">
                                <input data-plyr="seek" type="range" min="0" max="100" step="0.01" value="0" aria-label="Seek">
                                <progress class="plyr__progress__buffer" min="0" max="100" value="0">% buffered</progress>
                                <span role="tooltip" class="plyr__tooltip">00:00</span>
                            </div>
                            <div class="plyr__time plyr__time--current" aria-label="Current time">00:00</div>
                            <div class="plyr__time plyr__time--duration" aria-label="Duration">00:00</div>
                            <button type="button" class="plyr__control" aria-label="Mute" data-plyr="mute">
                                <svg class="icon--pressed" role="presentation"><use xlink:href="#plyr-muted"></use></svg>
                                <svg class="icon--not-pressed" role="presentation"><use xlink:href="#plyr-volume"></use></svg>
                                <span class="label--pressed plyr__tooltip" role="tooltip">Unmute</span>
                                <span class="label--not-pressed plyr__tooltip" role="tooltip">Mute</span>
                            </button>
                            <div class="plyr__volume">
                                <input data-plyr="volume" type="range" min="0" max="1" step="0.05" value="1" autocomplete="off" aria-label="Volume">
                            </div>
                            <button type="button" class="plyr__control" data-plyr="captions">
                                <svg class="icon--pressed" role="presentation"><use xlink:href="#plyr-captions-on"></use></svg>
                                <svg class="icon--not-pressed" role="presentation"><use xlink:href="#plyr-captions-off"></use></svg>
                                <span class="label--pressed plyr__tooltip" role="tooltip">Disable captions</span>
                                <span class="label--not-pressed plyr__tooltip" role="tooltip">Enable captions</span>
                            </button>
                            <button type="button" class="plyr__control" data-plyr="fullscreen">
                                <svg class="icon--pressed" role="presentation"><use xlink:href="#plyr-exit-fullscreen"></use></svg>
                                <svg class="icon--not-pressed" role="presentation"><use xlink:href="#plyr-enter-fullscreen"></use></svg>
                                <span class="label--pressed plyr__tooltip" role="tooltip">Exit fullscreen</span>
                                <span class="label--not-pressed plyr__tooltip" role="tooltip">Enter fullscreen</span>
                            </button>
                        </div>
                    `,
                    settings: ['captions', 'quality', 'speed', 'loop'],
                });
                player.on("ready", () => {
                    this.history.add(id);
                });
                clApp.pages.show("Videos", "Currently Playing");
                const videoTitle = document.getElementById(this.videoTitle);
                const videoStatus = document.getElementById(this.videoStatus);
                const videoCloseBtn = document.getElementById(this.videoCloseBtn);
                const videoResumeBtn = document.getElementById(this.videoResumeBtn);
                const videoDescription = document.getElementById(this.videoDescription);
                const videoCommentInput = document.getElementById(this.videoCommentInput);
                const videoCommentSubmitBtn = document.getElementById(this.videoCommentSubmitBtn);
                const videoCommentsAmountText = document.getElementById(this.videoCommentsAmountText);
                const videoCommentsContainer = document.getElementById(this.videoCommentsContainer);
                videoTitle.innerHTML = video.title;
                videoStatus.innerHTML = `${video.creator.display_name} | ${new Intl.DateTimeFormat("en-US", { timeStyle: "short", dateStyle: "short" }).format(new Date(video.created_at))} | ${video.views} views`;
                videoCloseBtn.onclick = () => {
                    clApp.dialog.confirm("Are you sure you want to close the video player?").then(ans => {
                        if (ans) {
                            clApp.pages.hide("Videos", "Currently Playing");
                            player.destroy();
                            videoPlayerPage.classList.add("hidden")
                            clApp.pages.open("Videos");
                        }
                    });
                }
                videoResumeBtn.onclick = () => {
                    clApp.pages.resetAll();
                }
                videoDescription.innerHTML = video.description;
                clApp.supabase.getUserProfile().then(res => {
                    videoCommentInput.placeholder = "Commenting as " + res.display_name;
                    videoCommentSubmitBtn.onclick = () => this.createComment(videoCommentInput.value);
                    this.renderComments();
                });
            },
            renderComments() {
                if (!this.currentVideo) {
                    console.error("No video to render comments for");
                    return;
                }
                const videoCommentsAmountText = document.getElementById(this.videoCommentsAmountText);
                const videoCommentsContainer = document.getElementById(this.videoCommentsContainer);
                videoCommentsContainer.innerHTML = "";
                clApp.supabase.getCommentsByVideo(this.currentVideo).then(comments => {
                    videoCommentsAmountText.innerHTML = `Comments (${comments.length})`;
                    comments.forEach(comment => {
                        if (comment.parent) return; // Prevent showing replies at top level
                        const commentElement = document.createElement("div");
                        commentElement.classList.add("cl-comment");
                        commentElement.innerHTML = `
                            <img src="${comment.author.photo_url || "https://placehold.co/512"}" alt="User Photo" class="cl-user-photo">
                            <div class="cl-container">
                                <h3>${comment.author.display_name} <small>${new Intl.DateTimeFormat("en-US", { timeStyle: "short", dateStyle: "short" }).format(new Date(comment.created_at))}</small></h3>
                                <p>${comment.content}</p>
                                <div class="cl-horizontal">
                                    <button class="cl-button" onclick="clApp.videos.replyToComment('${comment.id}')">
                                        <span class="material-symbols-outlined">reply</span>
                                    </button>
                                    <button class="cl-button" onclick="clApp.videos.editComment('${comment.id}')">
                                        <span class="material-symbols-outlined">edit</span>
                                    </button>
                                    <button class="cl-button" onclick="clApp.videos.deleteComment('${comment.id}')">
                                        <span class="material-symbols-outlined">delete</span>
                                    </button>
                                </div>
                                ${comments.filter(c => c.parent == comment.id).length > 0 ? `
                                    <div class="cl-collapsible cl-container">
                                        <input type="checkbox" class="cl-collapsible-checkbox">
                                        <div class="cl-horizontal cl-collapsible-top">
                                            <span class="material-symbols-outlined cl-collapsible-arrow">arrow_right</span>
                                            <h3>Replies (${comments.filter(c => c.parent == comment.id).length})</h3>
                                        </div>
                                        <div class="cl-container cl-collapsible-content">
                                            ${comments.filter(c => c.parent == comment.id).map(reply => {
                                                return `
                                                    <div class="cl-comment">
                                                        <img src="${reply.author.photo_url || "https://placehold.co/512"}" alt="User Photo" class="cl-user-photo">
                                                        <div class="cl-container">
                                                            <h3>${reply.author.display_name} <small>${new Intl.DateTimeFormat("en-US", { timeStyle: "short", dateStyle: "short" }).format(new Date(reply.created_at))}</small></h3>
                                                            <p>${reply.content}</p>
                                                            <div class="cl-horizontal">
                                                                <button class="cl-button" onclick="clApp.videos.editComment('${reply.id}')">
                                                                    <span class="material-symbols-outlined">edit</span>
                                                                </button>
                                                                <button class="cl-button" onclick="clApp.videos.deleteComment('${reply.id}')">
                                                                    <span class="material-symbols-outlined">delete</span>
                                                                </button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                `;
                                            }).join("")}
                                        </div>
                                    </div>
                                ` : ""}
                            </div>
                        `;
                        videoCommentsContainer.appendChild(commentElement);
                    });
                });
            },
            replyToComment(commentId, content) {
                clApp.pages.open("Loader")
                clApp.supabase.getUserProfile().then(user => {
                    if (!user) {
                        clApp.toast("info","You must be logged in to comment.");
                        clApp.pages.open("Videos", "Currently Playing")
                        return;
                    }
                    clApp.dialog.prompt("Reply to comment", "textarea").then(ans => {
                        if (ans && ans.trim() !== "") {
                            clApp.supabase.addCommentToVideo(this.currentVideo, ans, commentId).then(() => {
                                clApp.pages.open("Videos", "Currently Playing");
                                clApp.toast("info","Comment posted.");
                                this.renderComments();
                            });
                        } else {
                            clApp.toast("info","Comment cannot be empty.");
                        }
                    });
                })
            },
            editComment(commentId) {
                clApp.pages.open("Loader");
                clApp.supabase.getUserProfile().then(user => {
                    if (!user) {
                        clApp.toast("info","You must be logged in to edit a comment.");
                        clApp.pages.open("Videos", "Currently Playing");
                        return;
                    }
                    clApp.supabase.getCommentById(commentId).then(comment => {
                        if (comment.author.id !== user.id) {
                            clApp.toast("info","You cannot edit a comment that is not yours.");
                            clApp.pages.open("Videos", "Currently Playing")
                            return;
                        }
                        clApp.dialog.prompt("Edit comment", "textarea", comment.content).then(ans => {
                            if (ans && ans.trim() !== "") {
                                clApp.supabase.editComment(commentId, ans).then(() => {
                                    clApp.pages.open("Videos", "Currently Playing");
                                    clApp.toast("info","Comment edited.");
                                    this.renderComments();
                                });
                            } else {
                                clApp.toast("info","Comment cannot be empty.");
                            }
                        });
                    });
                });
            },
            deleteComment(commentId) {
                clApp.pages.open("Loader");
                clApp.supabase.getUserProfile().then(user => {
                    if (!user) {
                        clApp.toast("info","You must be logged in to delete a comment.");
                        clApp.pages.open("Videos", "Currently Playing");
                        return;
                    }
                    clApp.supabase.getCommentById(commentId).then(comment => {
                        if (comment.author.id !== user.id) {
                            clApp.toast("info","You cannot delete a comment that is not yours.");
                            clApp.pages.open("Videos", "Currently Playing")
                            return;
                        }
                        clApp.dialog.confirm("Are you sure you want to delete this comment?").then(ans => {
                            if (ans) {
                                clApp.supabase.deleteComment(commentId).then(() => {
                                    clApp.pages.open("Videos", "Currently Playing");
                                    clApp.toast("info","Comment deleted.");
                                    this.renderComments();
                                });
                            }
                        })
                    });
                });
            },
            createComment(content) {
                clApp.pages.open("Loader");
                clApp.supabase.getUserProfile().then(user => {
                    if (!user) {
                        clApp.toast("info","You must be logged in to create a comment.");
                        clApp.pages.open("Videos", "Currently Playing");
                        return;
                    }
                    clApp.supabase.addCommentToVideo(this.currentVideo, content).then(() => {
                        clApp.pages.open("Videos", "Currently Playing");
                        clApp.toast("info","Comment created.");
                        this.renderComments();
                    });
                });
            },
            history: {
                historyContainer: "app.videos.page.history.list",
                fetch() {
                    const historyContainer = document.getElementById(clApp.videos.history.historyContainer);
                    historyContainer.innerHTML = "";
                    var history = JSON.parse(localStorage.getItem("clAppVideoHistory")) || [];
                    if (history.length === 0) {
                        historyContainer.innerHTML = `<p>No videos watched.</p>`;
                        return;
                    }
                    history.sort((a, b) => new Date(b.date) - new Date(a.date)); // Sort by most recently watched.
                    history.forEach((item, index) => {
                        const video = clApp.videos.videos.find(v => v.id === item.id);
                        /*if (!video) {
                            setTimeout(() => history.splice(index, 1), 100);
                            return;
                        }*/
                        const videoElement = document.createElement("div");
                        videoElement.classList.add("cl-video");
                        videoElement.innerHTML = `
                            <img src="${video.thumbnail || "https://placehold.co/1600x900?text=No+Image"}" alt="${video.title}" class="cl-video-thumbnail">
                            <h3>${video.title || "Unavailable"}</h3>
                            <small>${new Intl.DateTimeFormat("en-US", { timeStyle: "short", dateStyle: "short" }).format(new Date(item.date))}</small>
                            <h4>${video.creator.display_name || "Unavailable"}</h4>
                        `;
                        videoElement.onclick = () => clApp.videos.play(video.id);
                        historyContainer.appendChild(videoElement);
                    });
                },
                add(id) {
                    const history = JSON.parse(localStorage.getItem("clAppVideoHistory")) || [];
                    history.push({ id: id, date: new Date().toISOString() });
                    localStorage.setItem("clAppVideoHistory", JSON.stringify(history));
                    this.fetch();
                }
            },
        }

        clApp.users = {
            usersContainer: "app.users.page.usersContainer",
            userJoinDate: "app.user.page.info.userJoinDate",
            userBanner: "app.user.page.info.userBanner",
            userPhoto: "app.user.page.info.userPhoto",
            userName: "app.user.page.info.userName",
            userBio: "app.user.page.info.userBio",
            userLinksContainer: "app.user.page.info.linksContainer",
            userVideosContainer: "app.user.page.videos.videosContainer",
            userActionsContainer: "app.user.page.info.userActionsContainer",
            fetch() {
                const usersContainer = document.getElementById(clApp.users.usersContainer);
                usersContainer.innerHTML = "";
                clApp.supabase.getUserProfiles().then(users => {
                    users.forEach(user => {
                        const userElement = document.createElement("div");
                        userElement.classList.add("cl-user");
                        userElement.innerHTML = `
                            <img src="${user.banner_url || "https://placehold.co/900x300?text=No+Image"}" alt="User Banner" class="cl-user-thumbnail">
                            <div class="cl-user-info-box">
                                <img src="${user.photo_url || "https://placehold.co/512"}" alt="User Photo" class="cl-user-photo">
                                <h3>${user.display_name || "User"}</h3>
                            </div>
                        `;
                        userElement.onclick = () => clApp.users.open(user.id);
                        usersContainer.appendChild(userElement);
                    });
                });
            },
            open(uid) {
                clApp.pages.open("Loader");
                clApp.supabase.getUserProfile(uid).then(user => {
                    const userJoinDate = document.getElementById(this.userJoinDate);
                    const userBanner = document.getElementById(this.userBanner);
                    const userPhoto = document.getElementById(this.userPhoto);
                    const userName = document.getElementById(this.userName);
                    const userBio = document.getElementById(this.userBio);
                    const userLinksContainer = document.getElementById(this.userLinksContainer);
                    const userVideosContainer = document.getElementById(this.userVideosContainer);
                    const userActionsContainer = document.getElementById(this.userActionsContainer);
                    userJoinDate.innerHTML = "Joined on "+ new Intl.DateTimeFormat("en-US", {dateStyle: "medium"}).format(new Date(user.created_at));
                    userBanner.src = user.banner_url || "https://placehold.co/900x300?text=No+Image";
                    userPhoto.src = user.photo_url || "https://placehold.co/512";
                    userName.innerHTML = (user.display_name || "User") + (user.is_admin ? "<span class='material-symbols-outlined'>shield</span>" : "");
                    userBio.innerHTML = user.bio || "No Bio";
                    userLinksContainer.innerHTML = user.links.map(link => {
                        return `
                            <a class="cl-button" href="${link}">
                                <i class="material-symbols-outlined">link</i>
                                <span>${link}</span>
                            </a>
                        `;
                    }).join("");
                    userActionsContainer.innerHTML = `
                        <button class="cl-button" onclick="clApp.stringUtility.copyToClipboard('${location.origin}/?mode=user&id=${uid}')">
                            <span class="material-symbols-outlined">share</span>
                        </button>
                    `;
                    clApp.supabase.getVideosByUser(uid).then(videos => {
                        userVideosContainer.innerHTML = "";
                        videos.sort((a, b) => new Date(b.created_at) - new Date(a.created_at)); // sort videos by most recent first
                        videos.forEach(video => {
                            const videoElement = document.createElement("div");
                            videoElement.classList.add("cl-video");
                            videoElement.innerHTML = `
                                <img src="${video.thumbnail || "https://placehold.co/1600x900?text=No+Image"}" alt="${video.title}" class="cl-video-thumbnail">
                                <h3>${video.title}</h3>
                                <h4>${video.creator.display_name} | ${new Intl.DateTimeFormat("en-US", { timeStyle: "short", dateStyle: "short" }).format(new Date(video.created_at))}</h4>
                            `;
                            videoElement.onclick = () => clApp.videos.play(video.id);
                            userVideosContainer.appendChild(videoElement);
                        });
                        clApp.pages.open("User");
                    });
                });
            },
        }

        clApp.account = {
            logoutBtn: "app.account.page.accountSettings.logoutBtn",
            userBanner: "app.account.page.accountSettings.userBanner",
            userPhoto: "app.account.page.accountSettings.userPhoto",
            profileEditorContainer: "app.account.page.accountSettings.profileEditorContainer",
            saveBtn: "app.account.page.accountSettings.saveBtn",
            deleteBtn: "app.account.page.accountSettings.deleteBtn",
            profileEditor: null,
            init() {
                if (this.profileEditor) this.profileEditor.destroy();
                const logoutBtn = document.getElementById(this.logoutBtn);
                const userBanner = document.getElementById(this.userBanner);
                const userPhoto = document.getElementById(this.userPhoto);
                const profileEditorContainer = document.getElementById(this.profileEditorContainer);
                const saveBtn = document.getElementById(this.saveBtn);
                const deleteBtn = document.getElementById(this.deleteBtn);
                JSONEditor.defaults.callbacks.upload = {
                    "userBannerUpload": function(jseditor, type, file, cbs) {
                        if (!file.type.startsWith("image/")) cbs.failure("File must be an image");
                        clApp.supabase.updateUserBanner(file).then(url => {
                            cbs.updateProgress(50);
                            userBanner.src = url.data.publicUrl;
                            cbs.updateProgress();
                            clApp.users.fetch();
                            cbs.success(url.data.publicUrl);
                        });
                    },
                    "userPhotoUpload": function(jseditor, type, file, cbs) {
                        if (!file.type.startsWith("image/")) cbs.failure("File must be an image");
                        cbs.updateProgress(33);
                        clApp.supabase.updateUserPhoto(file).then(url => {
                            cbs.updateProgress(66);
                            userPhoto.src = url.data.publicUrl;
                            cbs.updateProgress();
                            clApp.users.fetch();
                            cbs.success(url.data.publicUrl);
                        });
                    },
                }
                clApp.supabase.getUserProfile().then(profile => {
                    this.profileEditor = new JSONEditor(profileEditorContainer, {
                        schema: {
                            type: "object",
                            title: "Profile",
                            properties: {
                                banner_url: {
                                    type: "string",
                                    title: "Banner",
                                    format: "url",
                                    options: {
                                        upload: {
                                            upload_handler: "userBannerUpload",
                                        },
                                    },
                                    links: [
                                        {
                                            href: "{{self}}",
                                        },
                                    ],
                                },
                                photo_url: {
                                    type: "string",
                                    title: "Photo",
                                    format: "url",
                                    options: {
                                        upload: {
                                            upload_handler: "userPhotoUpload",
                                        },
                                    },
                                    links: [
                                        {
                                            href: "{{self}}",
                                        },
                                    ],
                                },
                                display_name: {
                                    type: "string",
                                    title: "Display Name",
                                },
                                bio: {
                                    type: "string",
                                    title: "Bio",
                                    format: "textarea",
                                },
                                links: {
                                    type: "array",
                                    title: "Links",
                                    items: {
                                        type: "string",
                                        title: "Link",
                                        format: "url",
                                    },
                                },
                            }
                        },
                        theme: "barebones",
                        show_errors: "always",
                        disable_edit_json: true,
                        disable_properties: true,
                        disable_collapse: true,
                        no_additional_properties: true,
                        compact: true,
                        object_layout: "table",
                        startval: profile,
                    });
                    userBanner.src = profile.banner_url || "https://placehold.co/900x300?text=No+Image";
                    userBanner.alt = profile.display_name;
                    userPhoto.src = profile.photo_url || "https://placehold.co/512?text=No+Image";
                    userPhoto.alt = profile.display_name;
                    saveBtn.onclick = () => {
                        if (this.profileEditor.getValue().display_name.trim() === "") {
                            clApp.toast("error", "Profile name cannot be empty");
                            return;
                        }
                        clApp.pages.open("Loader");
                        clApp.supabase.updateUserProfile(null, this.profileEditor.getValue()).then(res => {
                            clApp.pages.open("Account");
                            clApp.toast("info", "Profile updated");
                        });
                    }
                    deleteBtn.onclick = () => {
                        clApp.dialog.confirm("Are you sure you want to delete your account? This action is irreversible.").then(ans => {
                            if (ans) {
                                clApp.dialog.confirm("Are you REALLY sure you want to delete your account? This action is irreversible!").then(ans2 => {
                                    if (ans2) {
                                        clApp.pages.open("Loader");
                                        clApp.supabase.deleteUser().then(() => {
                                            clApp.pages.open("Auth");
                                            clApp.toast("info", "Account deleted");
                                        });
                                    }
                                });
                            }
                        });
                    }
                    logoutBtn.onclick = () => {
                        clApp.dialog.confirm("Are you sure you want to log out?").then(ans => {
                            if (ans) {
                                clApp.pages.open("Loader");
                                clApp.supabase.signOut().then(() => {
                                    clApp.pages.open("Auth");
                                    clApp.toast("info", "Logged out");
                                });
                            }
                        });
                    }
                });
            },
        }

        clApp.content = {
            videosContainer: "app.content.page.videos.boxedContent.videosContainer",
            videoEditorContainer: "app.content.page.newVideo.boxedContent.videoEditorContainer",
            videoEditorSubmitBtn: "app.content.page.newVideo.boxedContent.addVideoButton",
            videoEditor: null,
            init() {
                this.fetchVideos();
                this.createEditor();
            },
            fetchVideos() {
                const videosContainer = document.getElementById(this.videosContainer);
                const videoEditorContainer = document.getElementById(this.videoEditorContainer);
                const videoEditorSubmitBtn = document.getElementById(this.videoEditorSubmitBtn);
                clApp.supabase.getVideosByUser().then(videos => {
                    videosContainer.innerHTML = videos.map(video => {
                        return `
                            <tr>
                                <td>${video.title}</td>
                                <td>${new Intl.DateTimeFormat("en-US", { timeStyle: "short", dateStyle: "short" }).format(new Date(video.created_at))}</td>
                                <td>
                                    <div class="cl-horizontal">
                                        <button class="cl-button" onclick="clApp.videos.play(${video.id})">
                                            <i class="material-symbols-outlined">play_arrow</i>
                                        </button>
                                        <button class="cl-button" onclick="clApp.stringUtility.copyToClipboard('${location.origin}/?mode=video&id=${video.id}')">
                                            <i class="material-symbols-outlined">share</i>
                                        </button>
                                        <button class="cl-button" onclick="clApp.content.deleteVideo('${video.id}')">
                                            <i class="material-symbols-outlined">delete</i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                        `;
                    })
                });
            },
            deleteVideo(videoId) {
                clApp.pages.open("Loader")
                clApp.supabase.getVideo(videoId).then(video => {
                    clApp.supabase.getUserProfile().then(user => {
                        if (user.id !== video.creator.id) {
                            clApp.toast("error", "You cannot delete a video that is not yours.");
                            clApp.pages.open("Content");
                            return;
                        }
                        clApp.supabase.deleteVideo(videoId).then(() => {
                            clApp.toast("success", "Video deleted successfully.");
                            clApp.pages.open("Content");
                            clApp.content.fetchVideos();
                        });
                    });
                });
            },
            createEditor() {
                const videosContainer = document.getElementById(this.videos);
                const videoEditorContainer = document.getElementById(this.videoEditorContainer);
                const videoEditorSubmitBtn = document.getElementById(this.videoEditorSubmitBtn);
                const defaultValue = {
                    video: "",
                    thumbnail: "",
                    title: "New Video",
                    description: "",
                    tracks: [],
                }
                JSONEditor.defaults.callbacks.upload.videoUpload = (jseditor, type, file, cbs) => {
                    if (!file.type.startsWith("video/")) cbs.failure("File must be a video.");
                    cbs.updateProgress(50);
                    clApp.supabase.uploadFile(file).then(url => {
                        if (url.data.publicUrl) {
                            cbs.updateProgress();
                            cbs.success(url.data.publicUrl);
                        } else {
                            cbs.failure("File upload failed.");
                        }
                    });
                }
                JSONEditor.defaults.callbacks.upload.thumbnailUpload = (jseditor, type, file, cbs) => {
                    if (!file.type.startsWith("image/")) cbs.failure("File must be an image.");
                    cbs.updateProgress(50);
                    clApp.supabase.uploadFile(file).then(url => {
                        if (url.data.publicUrl) {
                            cbs.updateProgress();
                            cbs.success(url.data.publicUrl);
                        } else {
                            cbs.failure("File upload failed.");
                        }
                    });
                }
                JSONEditor.defaults.callbacks.upload.subtitleUpload = (jseditor, type, file, cbs) => {
                    if (file.type !== "text/vtt") cbs.failure("File must be a WebVTT (.vtt) subtitle file.");
                    cbs.updateProgress(50);
                    clApp.supabase.uploadFile(file).then(url => {
                        if (url.data.publicUrl) {
                            cbs.updateProgress();
                            cbs.success(url.data.publicUrl);
                        } else {
                            cbs.failure("File upload failed.");
                        }
                    });
                }
                this.videoEditor = new JSONEditor(videoEditorContainer, {
                    schema: {
                        type: "object",
                        title: "Video",
                        properties: {
                            video: {
                                type: "string",
                                format: "url",
                                title: "Video",
                                description: "The video file. May take a while to upload.",
                                options: {
                                    upload: {
                                        upload_handler: "videoUpload",
                                    }
                                },
                                links: [
                                    {
                                        href: "{{self}}",
                                    },
                                ],
                            },
                            thumbnail: {
                                type: "string",
                                format: "url",
                                title: "Thumbnail",
                                description: "The video thumbnail.",
                                options: {
                                    upload: {
                                        upload_handler: "thumbnailUpload",
                                    },
                                },
                                links: [
                                    {
                                        href: "{{self}}",
                                    },
                                ],
                            },
                            title: {
                                type: "string",
                                title: "Title",
                                description: "The video title.",
                            },
                            description: {
                                type: "string",
                                title: "Description",
                                description: "The video description.",
                                format: "textarea",
                            },
                            tracks: {
                                type: "array",
                                title: "Tracks",
                                description: "The video's subtitle tracks.",
                                items: {
                                    type: "object",
                                    title: "Track",
                                    properties: {
                                        language: {
                                            type: "string",
                                            title: "Language",
                                            description: "The track's language.",
                                            enum: ["en", "ar", "fr", "de", "es", "it", "pt", "ru", "zh"],
                                        },
                                        label: {
                                            type: "string",
                                            title: "Label",
                                            description: "The track's name.",
                                        },
                                        src: {
                                            type: "string",
                                            format: "url",
                                            title: "WebVTT (.vtt) file",
                                            description: "The track's WebVTT subtitle file.",
                                            options: {
                                                upload: {
                                                    upload_handler: "subtitleUpload",
                                                },
                                            },
                                            links: [
                                                {
                                                    href: "{{self}}",
                                                },
                                            ],
                                        },
                                    }
                                },
                            },
                        },
                    },
                    theme: "barebones",
                    show_errors: "always",
                    disable_edit_json: true,
                    disable_properties: true,
                    disable_collapse: true,
                    no_additional_properties: true,
                    compact: true,
                    object_layout: "table",
                });
                videoEditorSubmitBtn.onclick = () => {
                    clApp.supabase.createVideo(this.videoEditor.getValue()).then(() => {
                        clApp.toast("info", "Video created!");
                        this.videoEditor.setValue(defaultValue);
                        this.fetchVideos();
                    });
                }
            },
        }

        clApp.toast = function(icon, message) {
            const toast = document.createElement("div");
            toast.classList.add("cl-button");
            toast.innerHTML = `
                <i class="material-symbols-outlined">${icon}</i>
                <span>${message}</span>
            `;
            document.getElementById(clApp.config.toastContainer).appendChild(toast);
            setTimeout(() => {
                toast.remove();
            }, 5000);
        };

        clApp.setup = () => {
            const url = new URL(window.location.href);
            url.searchParams.forEach((val, key) => {
                clApp.config.parameters[key] = val;
            });
            clApp.pages.open("Loader");
            if (!localStorage.visited) {
                localStorage.visited = true;
                clApp.toast("info", "Welcome to Chillnet!");
                if ("serviceWorker" in navigator) {
                    clApp.toast("info", "Service workers are supported! Registering...");
                    if (Notification && Notification.permission !== "granted") Notification.requestPermission().then(perm => {
                        if (perm === "granted") {
                            clApp.toast("info", "Notification permission granted!");
                        } else {
                            clApp.toast("warning", "Notification permission denied!");
                        }
                    });
                    // Check if the service worker is registered
                    navigator.serviceWorker.getRegistrations().then(registrations => {
                        if (registrations.length > 0) {
                            clApp.toast("info", "Service worker already registered!");
                        } else {
                            navigator.serviceWorker.register("/serviceWorker.js").then(() => {
                                clApp.toast("info", "Service worker registered successfully!");
                            }).catch(err => {
                                clApp.toast("error", `Error registering service worker: ${err}`);
                            });
                        }
                    }).catch(err => {
                        clApp.toast("error", `Error checking service worker registrations: ${err}`);
                    });

                    //navigator.serviceWorker.register("/serviceWorker.js", { type: "module" });
                    //clApp.toast("info", "Service workers registered!");
                } else {
                    clApp.toast("warning", "Service workers are not supported!");
                }
            } else {
                clApp.toast("info", "Welcome back to Chillnet!");
            }
            clApp.pages.createCards("app.homeScreen.page.pageCardsContainer", clApp.config.pageCards);
            clApp.pages.init();
            clApp.pages.hide("Games", "Currently Playing");
            clApp.pages.hide("Videos", "Currently Playing");
            clApp.battery.init();
            clApp.date.init();
            clApp.settings.createEditor();
            clApp.settings.update(clApp.settings.get());
            clApp.supabase.init();
            clApp.games.init();
            clApp.minecraft.fetch();
            clApp.auth.init();
            clApp.chat.init();
            clApp.supabase.subscribe();
            clApp.videos.init();
            clApp.users.fetch();
            clApp.account.init();
            clApp.content.init();
            clApp.pages.open("Home");
            if (clApp.config.parameters.mode && clApp.config.parameters.id) {
                if (clApp.config.parameters.mode == "game")
                    clApp.games.open(clApp.config.parameters.id);
                if (clApp.config.parameters.mode == "video")
                    clApp.videos.play(clApp.config.parameters.id);
                if (clApp.config.parameters.mode == "user")
                    clApp.users.open(clApp.config.parameters.id);
            } else if (clApp.config.parameters.resetAll) {
                clApp.dialog.confirm("Do you want to reset all settings?").then((result) => {
                    if (result) {
                        localStorage.removeItem("clAppSettings");
                        clApp.settings.update(clApp.settings.default);
                        clApp.settings.editor.setValue(clApp.settings.default);
                        clApp.toast("info", "Settings reset to default.");
                    }
                });
            }
        };
        window.onerror = (message, src, lineno, colno, error) => {
            clApp.toast("error", `Error: ${message.toString()}<br>at ${src}:${lineno}:${colno}`);
        }
        window.onload = () => {
            clApp.setup();
        };
    </script>
</body>

</html>